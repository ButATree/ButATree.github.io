

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="归纳、总结、复习">
  <meta name="author" content="ButATree">
  <meta name="keywords" content="">
  <title>LFS6.3构建 - ButATree&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"butatree.site","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>ButATree</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-notebook"></i>
                关于
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/about/">
                    <i class="iconfont icon-user-fill"></i>
                    个人
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                相关链接
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/4l2p20.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="LFS6.3构建">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      ButATree
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-04-24 20:13" pubdate>
        2021年4月24日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      6.6k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      129
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">LFS6.3构建</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2021年4月25日 下午
                
              </p>
            
            <div class="markdown-body">
              <blockquote>
<p><strong>注：</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/download.html">官方文档</a> ：官方文档有步骤的详细解释，我这里就不在做介绍。简单的叙述构建过程。所安装的 <code>lfs-livecd</code> 在 <code>/usr/share/LFS-BOOK-6.3-HTML</code> 。</p>
<p><a target="_blank" rel="noopener" href="http://ftp.osuosl.org/pub/lfs-livecd/">镜像</a> </p>
<p>我这里使用的镜像是 <a target="_blank" rel="noopener" href="http://ftp.osuosl.org/pub/lfs-livecd/lfslivecd-x86-6.3-r2130.iso"><code>lfslivecd-x86-6.3-r2130.iso</code></a> </p>
<p>安装包位置：<code>/lfs-sources</code> </p>
<p>首先你得有耐心来构建完整的 <code>Linux</code> 操作系统，其次是构建过程需要花费大量时间。</p>
<p>客户端操作系统：<code>Linux</code> → <code>其他Linux 2.6.x 内核</code> </p>
<p><code>I/O</code> 控制器类型：<code>LSI Logic</code> </p>
<p>选择磁盘类型：<code>IDE</code> </p>
<p>其他的都默认即可。</p>
</blockquote>
<p><strong>构建前提：</strong></p>
<blockquote>
<ul>
<li><p>创建密码：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>使用 <code>SSH</code> 连接，开启 <code>sshd</code>：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>rc.d<span class="hljs-regexp">/init.d/</span>sshd start<br></code></pre></td></tr></table></figure>
</li>
<li><p>设置网络：</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">net</span>-stup<br></code></pre></td></tr></table></figure>
</li>
<li><p>磁盘分区</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 我分了两个 </span><br>  <span class="hljs-attribute">hda1</span>：swap：<span class="hljs-number">1</span>G<br>  <span class="hljs-attribute">hda2</span>：ext<span class="hljs-number">3</span>：<span class="hljs-number">7</span>G<br>  <br><span class="hljs-attribute">mke2fs</span> -jv /dev/hda<span class="hljs-number">2</span>   <br><span class="hljs-attribute">mkswap</span> /dev/hda<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h1 id="一、"><a href="#一、" class="headerlink" title="一、"></a>一、</h1><blockquote>
<p><font color=red><strong>强烈建议看着官网文档或者官方中文文档进行操作</strong></font></p>
</blockquote>
<h2 id="1）基础构建"><a href="#1）基础构建" class="headerlink" title="1）基础构建"></a>1）基础构建</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs awk">export LFS=<span class="hljs-regexp">/mnt/</span>lfs <span class="hljs-comment"># 注意，一旦shell断开就消失了</span><br>mkdir -pv <span class="hljs-variable">$LFS</span><br>mount -v -t ext3 <span class="hljs-regexp">/dev/</span>hda2 <span class="hljs-variable">$LFS</span><br>mkdir -v <span class="hljs-variable">$LFS</span>/sources<br>chmod -v a+wt <span class="hljs-variable">$LFS</span>/sources<br>mkdir -v <span class="hljs-variable">$LFS</span>/tools<br>ln -sv <span class="hljs-variable">$LFS</span><span class="hljs-regexp">/tools /</span><br><br>groupadd lfs<br>useradd -s <span class="hljs-regexp">/bin/</span>bash -g lfs -m -k <span class="hljs-regexp">/dev/</span>null lfs<br>passwd lfs<br><br>chown -v lfs <span class="hljs-variable">$LFS</span>/tools<br>chown -v lfs <span class="hljs-variable">$LFS</span>/sources<br><br>su - lfs<br>cat &gt; ~/.bash_profile &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>exec env -i HOME=<span class="hljs-variable">$HOME</span> TERM=<span class="hljs-variable">$TERM</span> PS1=<span class="hljs-string">&#x27;\u:\w\$ &#x27;</span> <span class="hljs-regexp">/bin/</span>bash<br>EOF<br><br>cat &gt; ~/.bashrc &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>set +h<br>umask <span class="hljs-number">022</span><br>LFS=<span class="hljs-regexp">/mnt/</span>lfs<br>LC_ALL=POSIX<br>PATH=<span class="hljs-regexp">/tools/</span>bin:<span class="hljs-regexp">/bin:/u</span>sr/bin<br>export LFS LC_ALL PATH<br>EOF<br><br>source ~/.bash_profile<br>cd <span class="hljs-variable">$LFS</span>/sources<br></code></pre></td></tr></table></figure>

<h1 id="二、"><a href="#二、" class="headerlink" title="二、"></a>二、</h1><h2 id="1）Binutils-2-17-Pass-1"><a href="#1）Binutils-2-17-Pass-1" class="headerlink" title="1）Binutils-2.17 - Pass 1"></a>1）<code>Binutils-2.17 - Pass 1</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/binutils-2.17.tar.bz2</span><br><span class="hljs-keyword">cd</span> binutils-2.17<br>mkdir -v <span class="hljs-string">../binutils-build</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">../binutils-build</span><br>CC=<span class="hljs-string">&quot;gcc -B/usr/bin/&quot;</span> <span class="hljs-string">../binutils-2.17/configure</span> \<br><span class="hljs-params">--prefix=/tools</span> <span class="hljs-params">--disable-nls</span> <span class="hljs-params">--disable-werror</span><br>make<br>make install<br>make -C ld clean<br>make -C ld LIB_PATH=<span class="hljs-string">/tools/lib</span><br>cp -v ld/ld-new <span class="hljs-string">/tools/bin</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf binutils-build<br>rm -rf binutils-2.17<br></code></pre></td></tr></table></figure>

<h2 id="2）GCC-4-1-2-Pass-1"><a href="#2）GCC-4-1-2-Pass-1" class="headerlink" title="2）GCC-4.1.2 - Pass 1"></a>2）<code>GCC-4.1.2 - Pass 1</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/gcc-4.1.2.tar.bz2</span><br><span class="hljs-keyword">cd</span> gcc-4.1.2<br>mkdir -v <span class="hljs-string">../gcc-build</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">../gcc-build</span><br>CC=<span class="hljs-string">&quot;gcc -B/usr/bin/&quot;</span> <span class="hljs-string">../gcc-4.1.2/configure</span> <span class="hljs-params">--prefix=/tools</span> \<br><span class="hljs-params">--with-local-prefix=/tools</span> <span class="hljs-params">--disable-nls</span> <span class="hljs-params">--enable-shared</span> \<br><span class="hljs-params">--enable-languages=c</span><br>make bootstrap<br>make install<br>ln -vs gcc <span class="hljs-string">/tools/bin/cc</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf gcc-build<br>rm -rf gcc-4.1.2<br></code></pre></td></tr></table></figure>

<h2 id="3）Linux-2-6-22-5-API-Headers"><a href="#3）Linux-2-6-22-5-API-Headers" class="headerlink" title="3）Linux-2.6.22.5 API Headers"></a>3）<code>Linux-2.6.22.5 API Headers</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xvf /lfs-sources/linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span>.tar.bz2<br><span class="hljs-keyword">cd</span> linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br><span class="hljs-keyword">make</span> mrproper<br><span class="hljs-keyword">make</span> headers_check<br><span class="hljs-keyword">make</span> INSTALL_HDR_PATH=dest headers_install<br><span class="hljs-keyword">cp</span> -<span class="hljs-keyword">rv</span> dest/include/* /tools/include<br><span class="hljs-keyword">cd</span> ..<br>rm -rf linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br></code></pre></td></tr></table></figure>

<h2 id="4）Glibc-2-5-1"><a href="#4）Glibc-2-5-1" class="headerlink" title="4）Glibc-2.5.1"></a>4）<code>Glibc-2.5.1</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/glibc-2.5.1.tar.bz2</span><br><span class="hljs-keyword">cd</span> glibc-2.5.1<br>mkdir -v <span class="hljs-string">../glibc-build</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">../glibc-build</span><br><span class="hljs-string">../glibc-2.5.1/configure</span> <span class="hljs-params">--prefix=/tools</span> \<br><span class="hljs-params">--disable-profile</span> <span class="hljs-params">--enable-add-ons</span> \<br><span class="hljs-params">--enable-kernel=2</span>.6.0 <span class="hljs-params">--with-binutils=/tools/bin</span> \<br><span class="hljs-params">--without-gd</span> <span class="hljs-params">--with-headers=/tools/include</span> \<br><span class="hljs-params">--without-selinux</span><br>make<br>make check<br>mkdir -v <span class="hljs-string">/tools/etc</span><br>touch <span class="hljs-string">/tools/etc/ld.so.conf</span><br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf glibc-build<br>rm -rf glibc-2.5.1<br></code></pre></td></tr></table></figure>

<h2 id="5）调整工具链"><a href="#5）调整工具链" class="headerlink" title="5）调整工具链"></a>5）调整工具链</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mv -v <span class="hljs-regexp">/tools/</span>bin/&#123;ld,ld-old&#125;<br>mv -v <span class="hljs-regexp">/tools/</span>$(gcc -dumpmachine)<span class="hljs-regexp">/bin/</span>&#123;ld,ld-old&#125;<br>mv -v <span class="hljs-regexp">/tools/</span>bin/&#123;ld-<span class="hljs-keyword">new</span>,ld&#125;<br>ln -sv <span class="hljs-regexp">/tools/</span>bin<span class="hljs-regexp">/ld /</span>tools<span class="hljs-regexp">/$(gcc -dumpmachine)/</span>bin/ld<br>gcc -dumpspecs | sed <span class="hljs-string">&#x27;s@^/lib/ld-linux.so.2@/tools&amp;@g&#x27;</span> \<br>&gt; `dirname $(gcc -<span class="hljs-keyword">print</span>-libgcc-<span class="hljs-keyword">file</span>-name)`/specs<br>GCC_INCLUDEDIR=`dirname $(gcc -<span class="hljs-keyword">print</span>-libgcc-<span class="hljs-keyword">file</span>-name)`/<span class="hljs-keyword">include</span> &amp;&amp;<br><span class="hljs-keyword">find</span> $&#123;GCC_INCLUDEDIR&#125;<span class="hljs-comment">/* -maxdepth 0 -xtype d -exec rm -rvf &#x27;&#123;&#125;&#x27; \; &amp;&amp;</span><br><span class="hljs-comment">rm -vf `grep -l &quot;DO NOT EDIT THIS FILE&quot; $&#123;GCC_INCLUDEDIR&#125;/*` &amp;&amp;</span><br><span class="hljs-comment">unset GCC_INCLUDEDIR</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">echo &#x27;main()&#123;&#125;&#x27; &gt; dummy.c</span><br><span class="hljs-comment">cc dummy.c</span><br><span class="hljs-comment">readelf -l a.out | grep &#x27;: /tools&#x27;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">rm -v dummy.c a.out</span><br></code></pre></td></tr></table></figure>

<h2 id="6）Tcl-8-4-15"><a href="#6）Tcl-8-4-15" class="headerlink" title="6）Tcl-8.4.15"></a>6）<code>Tcl-8.4.15</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/tcl8.4.15-src.tar.gz</span><br><span class="hljs-keyword">cd</span> tcl8.4.15<br><span class="hljs-keyword">cd</span> unix<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br>make install-private-headers<br>ln -sv tclsh8.4 <span class="hljs-string">/tools/bin/tclsh</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf tcl8.4.15<br></code></pre></td></tr></table></figure>

<h2 id="7）Expect-5-43-0"><a href="#7）Expect-5-43-0" class="headerlink" title="7）Expect-5.43.0"></a>7）<code>Expect-5.43.0</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/expect-5.43.0.tar.gz</span><br><span class="hljs-keyword">cd</span> expect-5.43<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">/lfs-sources/expect-5.43.0-spawn-1.patch</span><br>cp configure&#123;,<span class="hljs-string">.bak</span>&#125;<br>sed &#x27;s:<span class="hljs-string">/usr/local/bin</span>:<span class="hljs-string">/bin</span>:&#x27; configure.bak &gt; configure<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span> <span class="hljs-params">--with-tcl=/tools/lib</span> \<br><span class="hljs-params">--with-tclinclude=/tools/include</span> <span class="hljs-params">--with-x=no</span><br>make<br>make SCRIPTS=<span class="hljs-string">&quot;&quot;</span> install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf expect-5.43<br></code></pre></td></tr></table></figure>

<h2 id="8）DejaGNU-1-4-4"><a href="#8）DejaGNU-1-4-4" class="headerlink" title="8）DejaGNU-1.4.4"></a>8）<code>DejaGNU-1.4.4</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/dejagnu-1.4.4.tar.gz</span><br><span class="hljs-keyword">cd</span> dejagnu-1.4.4<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf dejagnu-1.4.4<br></code></pre></td></tr></table></figure>

<h2 id="9）GCC-4-1-2-Pass-2"><a href="#9）GCC-4-1-2-Pass-2" class="headerlink" title="9）GCC-4.1.2 - Pass 2"></a>9）<code>GCC-4.1.2 - Pass 2</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/gcc-4.1.2.tar.bz2</span><br><span class="hljs-keyword">cd</span> gcc-4.1.2<br>cp -v gcc/Makefile.in&#123;,<span class="hljs-string">.orig</span>&#125;<br>sed &#x27;s@\<span class="hljs-string">./fixinc</span>\<span class="hljs-string">.sh</span>@-c <span class="hljs-literal">true</span>@&#x27; gcc/Makefile.in.orig &gt; gcc/Makefile.in<br>cp -v gcc/Makefile.in&#123;,<span class="hljs-string">.tmp</span>&#125;<br>sed &#x27;s/^XCFLAGS =$/&amp; -fomit-frame-pointer/&#x27; gcc/Makefile.in.tmp \<br>&gt; gcc/Makefile.in<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">/lfs-sources/gcc-4.1.2-specs-1.patch</span><br>mkdir -v <span class="hljs-string">../gcc-build</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">../gcc-build</span><br><span class="hljs-string">../gcc-4.1.2/configure</span> <span class="hljs-params">--prefix=/tools</span> \<br><span class="hljs-params">--with-local-prefix=/tools</span> <span class="hljs-params">--enable-clocale=gnu</span> \<br><span class="hljs-params">--enable-shared</span> <span class="hljs-params">--enable-threads=posix</span> \<br><span class="hljs-params">--enable-__cxa_atexit</span> <span class="hljs-params">--enable-languages=c</span>,c++ \<br><span class="hljs-params">--disable-libstdcxx-pch</span><br>make<br>make -k check<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf gcc-4.1.2<br>rm -rf gcc-build<br><br>测试:<br><span class="hljs-keyword">echo</span> &#x27;main<span class="hljs-params">()</span>&#123;&#125;&#x27; &gt; dummy.c<br>cc dummy.c<br>readelf -l a.out | grep &#x27;: <span class="hljs-string">/tools</span>&#x27;<br><br>rm -v dummy.c a.out<br></code></pre></td></tr></table></figure>

<h2 id="10）Binutils-2-17-Pass-2"><a href="#10）Binutils-2-17-Pass-2" class="headerlink" title="10）Binutils-2.17 - Pass 2"></a>10）<code>Binutils-2.17 - Pass 2</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/binutils-2.17.tar.bz2</span><br><span class="hljs-keyword">cd</span> binutils-2.17<br>mkdir -v <span class="hljs-string">../binutils-build</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">../binutils-build</span><br><span class="hljs-string">../binutils-2.17/configure</span> <span class="hljs-params">--prefix=/tools</span> \<br><span class="hljs-params">--disable-nls</span> <span class="hljs-params">--with-lib-path=/tools/lib</span><br>make<br>make check<br>make install<br>make -C ld clean<br>make -C ld LIB_PATH=<span class="hljs-string">/usr/lib</span>:<span class="hljs-string">/lib</span><br>cp -v ld/ld-new <span class="hljs-string">/tools/bin</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf binutils-2.17<br>rm -rf binutils-build<br></code></pre></td></tr></table></figure>

<h2 id="11）Ncurses-5-6"><a href="#11）Ncurses-5-6" class="headerlink" title="11）Ncurses-5.6"></a>11）<code>Ncurses-5.6</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/ncurses-5.6.tar.gz</span><br><span class="hljs-keyword">cd</span> ncurses-5.6<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span> <span class="hljs-params">--with-shared</span> \<br><span class="hljs-params">--without-debug</span> <span class="hljs-params">--without-ada</span> <span class="hljs-params">--enable-overwrite</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf ncurses-5.6<br></code></pre></td></tr></table></figure>

<h2 id="12）Bash-3-2"><a href="#12）Bash-3-2" class="headerlink" title="12）Bash-3.2"></a>12）<code>Bash-3.2</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/bash-3.2.tar.gz</span><br><span class="hljs-keyword">cd</span> bash-3.2<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">/lfs-sources/bash-3.2-fixes-5.patch</span><br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span> <span class="hljs-params">--without-bash-malloc</span><br>make<br>make install<br>ln -vs bash <span class="hljs-string">/tools/bin/sh</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf bash-3.2<br></code></pre></td></tr></table></figure>

<h2 id="13）Bzip2-1-0-4"><a href="#13）Bzip2-1-0-4" class="headerlink" title="13）Bzip2-1.0.4"></a>13）<code>Bzip2-1.0.4</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xvf /lfs-sources/bzip<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span>.tar.gz<br><span class="hljs-attribute">cd</span> bzip<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">make</span><br><span class="hljs-attribute">make</span> PREFIX=/tools install<br><span class="hljs-attribute">cd</span> ..<br><span class="hljs-attribute">rm</span> -rf bzip<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>

<h2 id="14）Coreutils-6-9"><a href="#14）Coreutils-6-9" class="headerlink" title="14）Coreutils-6.9"></a>14）<code>Coreutils-6.9</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf <span class="hljs-regexp">/lfs-sources/</span>coreutils-<span class="hljs-number">6.9</span>.tar.bz2<br>cd coreutils-<span class="hljs-number">6.9</span><br>.<span class="hljs-regexp">/configure --prefix=/</span>tools<br>make<br>make install<br>cp -v src<span class="hljs-regexp">/su /</span>tools<span class="hljs-regexp">/bin/</span>su-tools<br>cd ..<br>rm -rf coreutils-<span class="hljs-number">6.9</span><br></code></pre></td></tr></table></figure>

<h2 id="15）Diffutils-2-8-1"><a href="#15）Diffutils-2-8-1" class="headerlink" title="15）Diffutils-2.8.1"></a>15）<code>Diffutils-2.8.1</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/diffutils-2.8.1.tar.gz</span><br><span class="hljs-keyword">cd</span> diffutils-2.8.1<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf diffutils-2.8.1<br></code></pre></td></tr></table></figure>

<h2 id="16）Findutils-4-2-31"><a href="#16）Findutils-4-2-31" class="headerlink" title="16）Findutils-4.2.31"></a>16）<code>Findutils-4.2.31</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/findutils-4.2.31.tar.gz</span><br><span class="hljs-keyword">cd</span> findutils-4.2.31<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf findutils-4.2.31<br></code></pre></td></tr></table></figure>

<h2 id="17）Gawk-3-1-5"><a href="#17）Gawk-3-1-5" class="headerlink" title="17）Gawk-3.1.5"></a>17）<code>Gawk-3.1.5</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/gawk-3.1.5.tar.bz2</span><br><span class="hljs-keyword">cd</span> gawk-3.1.5<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>cat &gt;&gt; config.h &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment">#define HAVE_LANGINFO_CODESET 1</span><br><span class="hljs-comment">#define HAVE_LC_MESSAGES 1</span><br>EOF<br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf gawk-3.1.5<br></code></pre></td></tr></table></figure>

<h2 id="18）Gettext-0-16-1"><a href="#18）Gettext-0-16-1" class="headerlink" title="18）Gettext-0.16.1"></a>18）<code>Gettext-0.16.1</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/gettext-0.16.1.tar.gz</span><br><span class="hljs-keyword">cd</span> gettext-0.16.1<br><span class="hljs-keyword">cd</span> gettext-tools<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span> <span class="hljs-params">--disable-shared</span><br>make -C gnulib-lib<br>make -C src msgfmt<br>cp -v src/msgfmt <span class="hljs-string">/tools/bin</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf gettext-0.16.1<br></code></pre></td></tr></table></figure>

<h2 id="19）Grep-2-5-1a"><a href="#19）Grep-2-5-1a" class="headerlink" title="19）Grep-2.5.1a"></a>19）<code>Grep-2.5.1a</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xvf /lfs-sources/<span class="hljs-keyword">grep</span>-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span><span class="hljs-keyword">a</span>.tar.bz2<br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">grep</span>-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span><span class="hljs-keyword">a</span><br>./configure --prefix=/tools \<br>--disable-<span class="hljs-keyword">perl</span>-regexp<br><span class="hljs-keyword">make</span><br><span class="hljs-keyword">make</span> install<br><span class="hljs-keyword">cd</span> ..<br>rm -rf <span class="hljs-keyword">grep</span>-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span><span class="hljs-keyword">a</span><br></code></pre></td></tr></table></figure>

<h2 id="20）Gzip-1-3-12"><a href="#20）Gzip-1-3-12" class="headerlink" title="20）Gzip-1.3.12"></a>20）<code>Gzip-1.3.12</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/gzip-1.3.12.tar.gz</span><br><span class="hljs-keyword">cd</span> gzip-1.3.12<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf gzip-1.3.12<br></code></pre></td></tr></table></figure>

<h2 id="21）Make-3-81"><a href="#21）Make-3-81" class="headerlink" title="21）Make-3.81"></a>21）<code>Make-3.81</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xvf /lfs-sources/<span class="hljs-keyword">make</span>-<span class="hljs-number">3.81</span>.tar.bz2<br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">make</span>-<span class="hljs-number">3.81</span><br>./configure --prefix=/tools<br><span class="hljs-keyword">make</span><br><span class="hljs-keyword">make</span> install<br><span class="hljs-keyword">cd</span> ..<br>rm -rf <span class="hljs-keyword">make</span>-<span class="hljs-number">3.81</span><br></code></pre></td></tr></table></figure>

<h2 id="22）Patch-2-5-4"><a href="#22）Patch-2-5-4" class="headerlink" title="22）Patch-2.5.4"></a>22）<code>Patch-2.5.4</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/patch-2.5.4.tar.gz</span><br><span class="hljs-keyword">cd</span> patch-2.5.4<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf patch-2.5.4<br></code></pre></td></tr></table></figure>

<h2 id="23）Perl-5-8-8"><a href="#23）Perl-5-8-8" class="headerlink" title="23）Perl-5.8.8"></a>23）<code>Perl-5.8.8</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf <span class="hljs-regexp">/lfs-sources/</span>perl-<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span>.tar.bz2<br>cd perl-<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span><br>patch -Np1 -i <span class="hljs-regexp">/lfs-sources/</span>perl-<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span>-libc-<span class="hljs-number">2</span>.patch<br>.<span class="hljs-regexp">/configure.gnu --prefix=/</span>tools -Dstatic_ext=<span class="hljs-string">&#x27;Data/Dumper Fcntl IO POSIX&#x27;</span><br>make perl utilities<br>cp -v perl pod<span class="hljs-regexp">/pod2man /</span>tools/bin<br>mkdir -pv <span class="hljs-regexp">/tools/</span>lib<span class="hljs-regexp">/perl5/</span><span class="hljs-number">5.8</span>.<span class="hljs-number">8</span><br>cp -Rv lib<span class="hljs-regexp">/* /</span>tools<span class="hljs-regexp">/lib/</span>perl5/<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span><br>cd ..<br>rm -rf perl-<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure>

<h2 id="24）Sed-4-1-5"><a href="#24）Sed-4-1-5" class="headerlink" title="24）Sed-4.1.5"></a>24）<code>Sed-4.1.5</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/sed-4.1.5.tar.gz</span><br><span class="hljs-keyword">cd</span> sed-4.1.5<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf sed-4.1.5<br></code></pre></td></tr></table></figure>

<h2 id="25）Tar-1-18"><a href="#25）Tar-1-18" class="headerlink" title="25）Tar-1.18"></a>25）<code>Tar-1.18</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/tar-1.18.tar.bz2</span><br><span class="hljs-keyword">cd</span> tar-1.18<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf tar-1.18<br></code></pre></td></tr></table></figure>

<h2 id="26）Texinfo-4-9"><a href="#26）Texinfo-4-9" class="headerlink" title="26）Texinfo-4.9"></a>26）<code>Texinfo-4.9</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf <span class="hljs-string">/lfs-sources/texinfo-4.9.tar.bz2</span><br><span class="hljs-keyword">cd</span> texinfo-4.9<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/tools</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf texinfo-4.9<br></code></pre></td></tr></table></figure>

<h2 id="27）Util-linux-2-12r"><a href="#27）Util-linux-2-12r" class="headerlink" title="27）Util-linux-2.12r"></a>27）<code>Util-linux-2.12r</code></h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs powershell">tar xvf /lfs<span class="hljs-literal">-sources</span>/util<span class="hljs-literal">-linux</span><span class="hljs-literal">-2</span>.<span class="hljs-number">12</span>r.tar.bz2<br><span class="hljs-built_in">cd</span> util<span class="hljs-literal">-linux</span><span class="hljs-literal">-2</span>.<span class="hljs-number">12</span><span class="hljs-built_in">r</span><br>sed <span class="hljs-literal">-i</span> <span class="hljs-string">&#x27;s@/usr/include@/tools/include@g&#x27;</span> configure<br>./configure<br>make <span class="hljs-literal">-C</span> lib<br>make <span class="hljs-literal">-C</span> <span class="hljs-built_in">mount</span> <span class="hljs-built_in">mount</span> umount<br>make <span class="hljs-literal">-C</span> text<span class="hljs-literal">-utils</span> more<br><span class="hljs-built_in">cp</span> <span class="hljs-literal">-v</span> <span class="hljs-built_in">mount</span>/&#123;,u&#125;<span class="hljs-built_in">mount</span> text<span class="hljs-literal">-utils</span>/more /tools/bin<br><span class="hljs-built_in">cd</span> ..<br><span class="hljs-built_in">rm</span> <span class="hljs-literal">-rf</span> util<span class="hljs-literal">-linux</span><span class="hljs-literal">-2</span>.<span class="hljs-number">12</span><span class="hljs-built_in">r</span><br></code></pre></td></tr></table></figure>

<h2 id="28）清理系统"><a href="#28）清理系统" class="headerlink" title="28）清理系统"></a>28）清理系统</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">strip --strip-debug <span class="hljs-regexp">/tools/</span>lib/*<br>strip --strip-unneeded <span class="hljs-regexp">/tools/</span>&#123;,s&#125;bin/*<br>rm -rf <span class="hljs-regexp">/tools/</span>&#123;info,man&#125;<br><span class="hljs-keyword">exit</span><br><br><span class="hljs-comment"># 改变所有者</span><br>chown -R root:root <span class="hljs-variable">$LFS</span>/tools<br><br>cp -v <span class="hljs-regexp">/lfs-sources/</span>* <span class="hljs-regexp">/mnt/</span>lfs<span class="hljs-regexp">/sources/</span><br></code></pre></td></tr></table></figure>

<h1 id="三、"><a href="#三、" class="headerlink" title="三、"></a>三、</h1><h2 id="1）挂载虚拟内核文件系统"><a href="#1）挂载虚拟内核文件系统" class="headerlink" title="1）挂载虚拟内核文件系统"></a>1）挂载虚拟内核文件系统</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -pv <span class="hljs-variable">$LFS</span>/&#123;dev,proc,sys&#125;<br>mknod -m <span class="hljs-number">600</span> <span class="hljs-variable">$LFS</span><span class="hljs-regexp">/dev/</span>console c <span class="hljs-number">5</span> <span class="hljs-number">1</span><br>mknod -m <span class="hljs-number">666</span> <span class="hljs-variable">$LFS</span><span class="hljs-regexp">/dev/</span>null c <span class="hljs-number">1</span> <span class="hljs-number">3</span><br>mount -v --bind <span class="hljs-regexp">/dev $LFS/</span>dev<br>mount -vt devpts devpts <span class="hljs-variable">$LFS</span><span class="hljs-regexp">/dev/</span>pts<br>mount -vt tmpfs shm <span class="hljs-variable">$LFS</span><span class="hljs-regexp">/dev/</span>shm<br>mount -vt proc proc <span class="hljs-variable">$LFS</span>/proc<br>mount -vt sysfs sysfs <span class="hljs-variable">$LFS</span>/sys<br></code></pre></td></tr></table></figure>

<h2 id="2）进入-Chroot-环境"><a href="#2）进入-Chroot-环境" class="headerlink" title="2）进入 Chroot 环境"></a>2）进入 Chroot 环境</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elixir">chroot <span class="hljs-string">&quot;$LFS&quot;</span> /tools/bin/env -i \<br>HOME=<span class="hljs-regexp">/root TERM=&quot;$TERM&quot; PS1=&#x27;\u:\w\$ &#x27; \</span><br><span class="hljs-regexp">PATH=/bin</span><span class="hljs-symbol">:/usr/bin</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/tools/bin</span> \<br>/tools/bin/bash --login +h<br><br></code></pre></td></tr></table></figure>

<h2 id="3）创建系统目录结构"><a href="#3）创建系统目录结构" class="headerlink" title="3）创建系统目录结构"></a>3）创建系统目录结构</h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">mkdir</span> -pv /&#123;bin,<span class="hljs-keyword">boot</span>,etc/opt,home,lib,mnt,opt&#125;<br><span class="hljs-keyword">mkdir</span> -pv /&#123;media/&#123;floppy,cdrom&#125;,sbin,srv,<span class="hljs-keyword">var</span>&#125;<br>install -dv -<span class="hljs-keyword">m</span> 0750 /root<br>install -dv -<span class="hljs-keyword">m</span> 1777 /tmp /<span class="hljs-keyword">var</span>/tmp<br><span class="hljs-keyword">mkdir</span> -pv /usr/&#123;,<span class="hljs-keyword">local</span>/&#125;&#123;bin,<span class="hljs-keyword">include</span>,lib,sbin,src&#125;<br><span class="hljs-keyword">mkdir</span> -pv /usr/&#123;,<span class="hljs-keyword">local</span>/&#125;share/&#123;doc,info,locale,<span class="hljs-keyword">man</span>&#125;<br><span class="hljs-keyword">mkdir</span> -v /usr/&#123;,<span class="hljs-keyword">local</span>/&#125;share/&#123;misc,terminfo,zoneinfo&#125;<br><span class="hljs-keyword">mkdir</span> -pv /usr/&#123;,<span class="hljs-keyword">local</span>/&#125;share/<span class="hljs-keyword">man</span>/<span class="hljs-keyword">man</span>&#123;1..8&#125;<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">dir</span> <span class="hljs-keyword">in</span> /usr /usr/<span class="hljs-keyword">local</span>; <span class="hljs-keyword">do</span><br>ln -sv share/&#123;<span class="hljs-keyword">man</span>,doc,info&#125; <span class="hljs-variable">$dir</span><br>done<br><span class="hljs-keyword">mkdir</span> -v /<span class="hljs-keyword">var</span>/&#123;lock,<span class="hljs-keyword">log</span>,mail,<span class="hljs-keyword">run</span>,spool&#125;<br><span class="hljs-keyword">mkdir</span> -pv /<span class="hljs-keyword">var</span>/&#123;opt,cache,lib/&#123;misc,locate&#125;,<span class="hljs-keyword">local</span>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="4）创建必需的文件与符号连接"><a href="#4）创建必需的文件与符号连接" class="headerlink" title="4）创建必需的文件与符号连接"></a>4）创建必需的文件与符号连接</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs gradle">ln -sv <span class="hljs-regexp">/tools/</span>bin<span class="hljs-regexp">/&#123;bash,cat,echo,grep,pwd,stty&#125; /</span>bin<br>ln -sv <span class="hljs-regexp">/tools/</span>bin<span class="hljs-regexp">/perl /u</span>sr/bin<br>ln -sv <span class="hljs-regexp">/tools/</span>lib<span class="hljs-regexp">/libgcc_s.so&#123;,.1&#125; /u</span>sr/lib<br>ln -sv <span class="hljs-regexp">/tools/</span>lib<span class="hljs-regexp">/libstdc++.so&#123;,.6&#125; /u</span>sr/lib<br>ln -sv bash <span class="hljs-regexp">/bin/</span>sh<br><br>touch <span class="hljs-regexp">/etc/m</span>tab<br><br>cat &gt; <span class="hljs-regexp">/etc/</span>passwd &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>root:x:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:root:<span class="hljs-regexp">/root:/</span>bin/bash<br>nobody:x:<span class="hljs-number">99</span>:<span class="hljs-number">99</span>:Unprivileged User:<span class="hljs-regexp">/dev/</span><span class="hljs-keyword">null</span>:<span class="hljs-regexp">/bin/</span><span class="hljs-keyword">false</span><br>EOF<br><br>cat &gt; <span class="hljs-regexp">/etc/g</span>roup &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>root:x:<span class="hljs-number">0</span>:<br>bin:x:<span class="hljs-number">1</span>:<br>sys:x:<span class="hljs-number">2</span>:<br>kmem:x:<span class="hljs-number">3</span>:<br>tty:x:<span class="hljs-number">4</span>:<br>tape:x:<span class="hljs-number">5</span>:<br>daemon:x:<span class="hljs-number">6</span>:<br>floppy:x:<span class="hljs-number">7</span>:<br>disk:x:<span class="hljs-number">8</span>:<br>lp:x:<span class="hljs-number">9</span>:<br>dialout:x:<span class="hljs-number">10</span>:<br>audio:x:<span class="hljs-number">11</span>:<br>video:x:<span class="hljs-number">12</span>:<br>utmp:x:<span class="hljs-number">13</span>:<br>usb:x:<span class="hljs-number">14</span>:<br>cdrom:x:<span class="hljs-number">15</span>:<br>mail:x:<span class="hljs-number">34</span>:<br>nogroup:x:<span class="hljs-number">99</span>:<br>EOF<br><br>exec <span class="hljs-regexp">/tools/</span>bin/bash --login +h<br><br>touch <span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/utmp /</span>var<span class="hljs-regexp">/log/</span>&#123;btmp,lastlog,wtmp&#125;<br>chgrp -v utmp <span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/utmp /</span>var<span class="hljs-regexp">/log/</span>lastlog<br>chmod -v <span class="hljs-number">664</span> <span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/utmp /</span>var<span class="hljs-regexp">/log/</span>lastlog<br></code></pre></td></tr></table></figure>

<h2 id="5）Linux-2-6-22-5-API-Headers"><a href="#5）Linux-2-6-22-5-API-Headers" class="headerlink" title="5）Linux-2.6.22.5 API Headers"></a>5）<code>Linux-2.6.22.5 API Headers</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cd</span> /sources/<br><br>tar xvf linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span>.tar.bz2<br><span class="hljs-keyword">cd</span> linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br>sed -i <span class="hljs-string">&#x27;/scsi/d&#x27;</span> include/Kbuild<br><span class="hljs-keyword">make</span> mrproper<br><span class="hljs-keyword">make</span> headers_check<br><span class="hljs-keyword">make</span> INSTALL_HDR_PATH=dest headers_install<br><span class="hljs-keyword">cp</span> -<span class="hljs-keyword">rv</span> dest/includecrt[<span class="hljs-number">1</span>in].*succeeded<span class="hljs-string">&#x27; dummy.log</span><br></code></pre></td></tr></table></figure>

<h2 id="6）Man-pages-2-63"><a href="#6）Man-pages-2-63" class="headerlink" title="6）Man-pages-2.63"></a>6）<code>Man-pages-2.63</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xf Man-pages-<span class="hljs-number">2</span>.<span class="hljs-number">63</span>.tar.bz<span class="hljs-number">2</span><br><span class="hljs-attribute">cd</span> man-pages-<span class="hljs-number">2</span>.<span class="hljs-number">63</span>/<br><span class="hljs-attribute">make</span> install<br><span class="hljs-attribute">cd</span> ..<br><span class="hljs-attribute">rm</span> -rf make-pages-<span class="hljs-number">2</span>.<span class="hljs-number">63</span><br></code></pre></td></tr></table></figure>

<h2 id="7）Glibc-2-5-1"><a href="#7）Glibc-2-5-1" class="headerlink" title="7）Glibc-2.5.1"></a>7）<code>Glibc-2.5.1</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xf glibc-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span>.tar.bz2<br><span class="hljs-keyword">cd</span> Glibc-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span>/<br>tar -xvf ../glibc-libidn-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span>.tar.gz<br>mv glibc-libidn-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span> libidn<br>sed -i <span class="hljs-string">&#x27;/vi_VN.TCVN/d&#x27;</span> localedata/SUPPORTED<br>sed -i \<br><span class="hljs-string">&#x27;s|libs -o|libs -L/usr/lib -Wl,-dynamic-linker=/lib/ld-linux.so.2 -o|&#x27;</span> \<br>        scripts/test-installation.pl<br>sed -i <span class="hljs-string">&#x27;s|@BASH@|/bin/bash|&#x27;</span> elf/ldd.bash.in<br><span class="hljs-built_in">mkdir</span> -v ../glibc-build<br><span class="hljs-keyword">cd</span> ../glibc-build<br>../glibc-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span>/configure --prefix=/usr \<br>    --disable-<span class="hljs-keyword">profile</span> --enable-<span class="hljs-built_in">add</span>-ons \<br>    --enable-kernel=<span class="hljs-number">2.6</span>.<span class="hljs-number">0</span> --libexecdir=/usr/lib/glibc<br><span class="hljs-keyword">make</span><br><span class="hljs-keyword">make</span> -<span class="hljs-keyword">k</span> check <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> | tee glibc-check-<span class="hljs-built_in">log</span><br><span class="hljs-keyword">grep</span> Error glibc-check-<span class="hljs-built_in">log</span><br>touch /etc/ld.<span class="hljs-keyword">so</span>.<span class="hljs-keyword">conf</span><br><span class="hljs-keyword">make</span> install<br><br><span class="hljs-built_in">mkdir</span> -pv /usr/lib/locale<br>localedef -i de_DE -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> de_DE<br>localedef -i de_DE@euro -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">15</span> de_DE@euro<br>localedef -i en_HK -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> en_HK<br>localedef -i en_PH -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> en_PH<br>localedef -i en_US -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> en_US<br>localedef -i en_US -<span class="hljs-keyword">f</span> UTF-<span class="hljs-number">8</span> en_US.UTF-<span class="hljs-number">8</span><br>localedef -i es_MX -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> es_MX<br>localedef -i fa_IR -<span class="hljs-keyword">f</span> UTF-<span class="hljs-number">8</span> fa_IR<br>localedef -i fr_FR -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> fr_FR<br>localedef -i fr_FR@euro -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">15</span> fr_FR@euro<br>localedef -i fr_FR -<span class="hljs-keyword">f</span> UTF-<span class="hljs-number">8</span> fr_FR.UTF-<span class="hljs-number">8</span><br>localedef -i it_IT -<span class="hljs-keyword">f</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> it_IT<br>localedef -i ja_JP -<span class="hljs-keyword">f</span> EUC-JP ja_JP<br><br><span class="hljs-keyword">make</span> localedata/install-locales<br><br><span class="hljs-keyword">cat</span> &gt; /etc/nsswitch.<span class="hljs-keyword">conf</span> &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin /etc/nsswitch.<span class="hljs-keyword">conf</span><br><br>passwd: <span class="hljs-keyword">files</span><br>group: <span class="hljs-keyword">files</span><br>shado<span class="hljs-variable">w:</span> <span class="hljs-keyword">files</span><br><br>host<span class="hljs-variable">s:</span> <span class="hljs-keyword">files</span> dns<br>network<span class="hljs-variable">s:</span> <span class="hljs-keyword">files</span><br><br>protocol<span class="hljs-variable">s:</span> <span class="hljs-keyword">files</span><br>service<span class="hljs-variable">s:</span> <span class="hljs-keyword">files</span><br>ether<span class="hljs-variable">s:</span> <span class="hljs-keyword">files</span><br>rpc: <span class="hljs-keyword">files</span><br><br># End /etc/nsswitch.<span class="hljs-keyword">conf</span><br>EOF<br><br>tzselect<br><span class="hljs-keyword">cp</span> -v --<span class="hljs-built_in">remove</span>-destination /usr/share/zoneinfo/Asia/Shanghai \<br>    /etc/<span class="hljs-built_in">localtime</span><br>    <br><span class="hljs-keyword">cat</span> &gt; /etc/ld.<span class="hljs-keyword">so</span>.<span class="hljs-keyword">conf</span> &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin /etc/ld.<span class="hljs-keyword">so</span>.<span class="hljs-keyword">conf</span><br><br>/usr/local/lib<br>/<span class="hljs-keyword">opt</span>/lib<br><br># End /etc/ld.<span class="hljs-keyword">so</span>.<span class="hljs-keyword">conf</span><br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="8）再次调整工具链"><a href="#8）再次调整工具链" class="headerlink" title="8）再次调整工具链"></a>8）再次调整工具链</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mv -v <span class="hljs-regexp">/tools/</span>bin/&#123;ld,ld-old&#125;<br>mv -v <span class="hljs-regexp">/tools/</span>$(gcc -dumpmachine)<span class="hljs-regexp">/bin/</span>&#123;ld,ld-old&#125;<br>mv -v <span class="hljs-regexp">/tools/</span>bin/&#123;ld-<span class="hljs-keyword">new</span>,ld&#125;<br>ln -sv <span class="hljs-regexp">/tools/</span>bin<span class="hljs-regexp">/ld /</span>tools<span class="hljs-regexp">/$(gcc -dumpmachine)/</span>bin/ld<br><br>gcc -dumpspecs | sed \<br>    -e <span class="hljs-string">&#x27;s@/tools/lib/ld-linux.so.2@/lib/ld-linux.so.2@g&#x27;</span> \<br>    -e <span class="hljs-string">&#x27;/\*startfile_prefix_spec:/&#123;n;s@.*@/usr/lib/ @&#125;&#x27;</span> \<br>    -e <span class="hljs-string">&#x27;/\*cpp:/&#123;n;s@$@ -isystem /usr/include@&#125;&#x27;</span> &gt; \<br>    `dirname $(gcc --<span class="hljs-keyword">print</span>-libgcc-<span class="hljs-keyword">file</span>-name)`/specs<br><br>echo <span class="hljs-string">&#x27;main()&#123;&#125;&#x27;</span> &gt; dummy.c<br>cc dummy.c -v -Wl,--verbose &amp;&gt; dummy.log<br>readelf -l a.out | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;: /lib&#x27;</span><br><br><span class="hljs-keyword">grep</span> -o <span class="hljs-string">&#x27;/usr/lib.*/crt[1in].*succeeded&#x27;</span> dummy.log<br><br><span class="hljs-keyword">grep</span> -B1 <span class="hljs-string">&#x27;^ /usr/include&#x27;</span> dummy.log<br><br><span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;SEARCH.*/usr/lib&#x27;</span> dummy.log |sed <span class="hljs-string">&#x27;s|; |\n|g&#x27;</span><br><br><span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;/lib/libc.so.6 &quot;</span> dummy.log<br><br><span class="hljs-keyword">grep</span> found dummy.log<br><br>rm -v dummy.c a.out dummy.log<br></code></pre></td></tr></table></figure>

<h2 id="9）Binutils-2-17"><a href="#9）Binutils-2-17" class="headerlink" title="9）Binutils-2.17"></a>9）<code>Binutils-2.17</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">expect -c <span class="hljs-string">&quot;spawn ls&quot;</span><br><br>tar xvf binutils-2.17.tar.bz2<br><span class="hljs-keyword">cd</span> binutils-2.17<br>mkdir -v <span class="hljs-string">../binutils-build</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">../binutils-build</span><br><span class="hljs-string">../binutils-2.17/configure</span> <span class="hljs-params">--prefix=/usr</span> \<br><span class="hljs-params">--enable-shared</span><br>make tooldir=<span class="hljs-string">/usr</span><br>make check<br>make tooldir=<span class="hljs-string">/usr</span> install<br>cp -v <span class="hljs-string">../binutils-2.17/include/libiberty.h</span> <span class="hljs-string">/usr/include</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf binutils-2.17<br>rm -rf binutils-build<br></code></pre></td></tr></table></figure>

<h2 id="10）GCC-4-1-2"><a href="#10）GCC-4-1-2" class="headerlink" title="10）GCC-4.1.2"></a>10）<code>GCC-4.1.2</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xvf gcc-<span class="hljs-number">4.1</span>.<span class="hljs-number">2</span>.tar.bz2<br><span class="hljs-keyword">cd</span> gcc-<span class="hljs-number">4.1</span>.<span class="hljs-number">2</span><br>sed -i <span class="hljs-string">&#x27;s/install_to_$(INSTALL_DEST) //&#x27;</span> libiberty/Makefile.in<br>sed -i <span class="hljs-string">&#x27;s/^XCFLAGS =$/&amp; -fomit-frame-pointer/&#x27;</span> gcc/Makefile.in<br>sed -i <span class="hljs-string">&#x27;s@\./fixinc\.sh@-c true@&#x27;</span> gcc/Makefile.in<br>sed -i <span class="hljs-string">&#x27;s/@have_mktemp_command@/yes/&#x27;</span> gcc/gccbug.in<br><span class="hljs-built_in">mkdir</span> -v ../gcc-build<br><span class="hljs-keyword">cd</span> ../gcc-build<br>../gcc-<span class="hljs-number">4.1</span>.<span class="hljs-number">2</span>/configure --prefix=/usr \<br>--libexecdir=/usr/lib --enable-shared \<br>--enable-threads=posix --enable-__cxa_atexit \<br>--enable-clocale=gnu --enable-languages=<span class="hljs-keyword">c</span>,<span class="hljs-keyword">c</span>++<br><span class="hljs-keyword">make</span><br><span class="hljs-keyword">make</span> -<span class="hljs-keyword">k</span> check<br>../gcc-<span class="hljs-number">4.1</span>.<span class="hljs-number">2</span>/contrib/test_summary<br><span class="hljs-keyword">make</span> install<br><span class="hljs-keyword">ln</span> -<span class="hljs-keyword">sv</span> ../usr/bin/cpp /lib<br><span class="hljs-keyword">ln</span> -<span class="hljs-keyword">sv</span> gcc /usr/bin/<span class="hljs-keyword">cc</span><br><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;main()&#123;&#125;&#x27;</span> &gt; dummy.<span class="hljs-keyword">c</span><br><span class="hljs-keyword">cc</span> dummy.<span class="hljs-keyword">c</span> -v -Wl,--<span class="hljs-keyword">verbose</span> &amp;&gt; dummy.<span class="hljs-built_in">log</span><br>readelf -<span class="hljs-keyword">l</span> <span class="hljs-keyword">a</span>.out | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;: /lib&#x27;</span><br><br><span class="hljs-keyword">grep</span> -<span class="hljs-keyword">o</span> <span class="hljs-string">&#x27;/usr/lib.*/crt[1in].*succeeded&#x27;</span> dummy.<span class="hljs-built_in">log</span><br><span class="hljs-keyword">grep</span> -B3 <span class="hljs-string">&#x27;^ /usr/include&#x27;</span> dummy.<span class="hljs-built_in">log</span><br><span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;SEARCH.*/usr/lib&#x27;</span> dummy.<span class="hljs-built_in">log</span> |sed <span class="hljs-string">&#x27;s|; |\n|g&#x27;</span><br><span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;/lib/libc.so.6 &quot;</span> dummy.<span class="hljs-built_in">log</span><br><span class="hljs-keyword">grep</span> found dummy.<span class="hljs-built_in">log</span><br>rm -v dummy.<span class="hljs-keyword">c</span> <span class="hljs-keyword">a</span>.out dummy.<span class="hljs-built_in">log</span><br><span class="hljs-keyword">cd</span> ..<br>rm -rf gcc-<span class="hljs-number">4.1</span>.<span class="hljs-number">2</span><br>rm -rf gcc-build<br></code></pre></td></tr></table></figure>

<h2 id="11）DB-4-5-20"><a href="#11）DB-4-5-20" class="headerlink" title="11）DB-4.5.20"></a>11）<code>DB-4.5.20</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf db-4.5.20.tar.gz<br><span class="hljs-keyword">cd</span> db-4.5.20<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../db-4.5.20-fixes-1.patch</span><br><span class="hljs-keyword">cd</span> build_unix<br><span class="hljs-string">../dist/configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--enable-compat185</span> <span class="hljs-params">--enable-cxx</span><br>make<br>make docdir=<span class="hljs-string">/usr/share/doc/db-4.5.20</span> install<br>chown -Rv root<span class="hljs-function">:root</span> <span class="hljs-string">/usr/share/doc/db-4.5.20</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf db-4.5.20<br></code></pre></td></tr></table></figure>

<h2 id="12）Sed-4-1-5"><a href="#12）Sed-4-1-5" class="headerlink" title="12）Sed-4.1.5"></a>12）<code>Sed-4.1.5</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf sed-4.1.5.tar.gz<br><span class="hljs-keyword">cd</span> sed-4.1.5<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--bindir=/bin</span> <span class="hljs-params">--enable-html</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf sed-4.1.5<br></code></pre></td></tr></table></figure>

<h2 id="13）E2fsprogs-1-40-2"><a href="#13）E2fsprogs-1-40-2" class="headerlink" title="13）E2fsprogs-1.40.2"></a>13）<code>E2fsprogs-1.40.2</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf e2fsprogs-1.40.2.tar.gz<br><span class="hljs-keyword">cd</span> e2fsprogs-1.40.2<br>sed -i -e &#x27;s@<span class="hljs-string">/bin/rm</span>@<span class="hljs-string">/tools</span>&amp;@&#x27; lib/blkid/test_probe.in<br>mkdir -v build<br><span class="hljs-keyword">cd</span> build<br><span class="hljs-string">../configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--with-root-prefix=</span><span class="hljs-string">&quot;&quot;</span> \<br><span class="hljs-params">--enable-elf-shlibs</span><br>make<br>make install<br>make install-libs<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf e2fsprogs-1.40.2<br></code></pre></td></tr></table></figure>

<h2 id="14）Coreutils-6-9-1"><a href="#14）Coreutils-6-9-1" class="headerlink" title="14）Coreutils-6.9"></a>14）<code>Coreutils-6.9</code></h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar xvf coreutils-<span class="hljs-number">6.9</span>.tar.bz2<br>cd coreutils-<span class="hljs-number">6.9</span><br>patch -Np1 -i ../coreutils-<span class="hljs-number">6.9</span>-uname-<span class="hljs-number">1</span>.patch<br>patch -Np1 -i ../coreutils-<span class="hljs-number">6.9</span>-suppress_uptime_kill_su-<span class="hljs-number">1</span>.patch<br>patch -Np1 -i ../coreutils-<span class="hljs-number">6.9</span>-i18n-<span class="hljs-number">1</span>.patch<br>chmod +x tests<span class="hljs-regexp">/sort/</span><span class="hljs-keyword">sort</span>-mb-tests<br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr<br>make<br>make NON_ROOT_USERNAME=nobody check-root<br>echo <span class="hljs-string">&quot;dummy:x:1000:nobody&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/g</span>roup<br>su-tools nobody -s <span class="hljs-regexp">/bin/</span>bash -c <span class="hljs-string">&quot;make RUN_EXPENSIVE_TESTS=yes check&quot;</span><br>sed -i <span class="hljs-string">&#x27;/dummy/d&#x27;</span> <span class="hljs-regexp">/etc/g</span>roup<br>make install<br>mv -v <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/&#123;cat,chgrp,chmod,chown,cp,date,dd,df,echo&#125; /</span>bin<br>mv -v <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/&#123;false,hostname,ln,ls,mkdir,mknod,mv,pwd,readlink,rm&#125; /</span>bin<br>mv -v <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/&#123;rmdir,stty,sync,true,uname&#125; /</span>bin<br>mv -v <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/chroot /u</span>sr/sbin<br><br>mv -v <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/&#123;head,sleep,nice&#125; /</span>bin<br>cd ..<br>rm -rf coreutils-<span class="hljs-number">6.9</span><br></code></pre></td></tr></table></figure>

<h2 id="15）Iana-Etc-2-20"><a href="#15）Iana-Etc-2-20" class="headerlink" title="15）Iana-Etc-2.20"></a>15）<code>Iana-Etc-2.20</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xvf iana-etc-<span class="hljs-number">2</span>.<span class="hljs-number">20</span>.tar.bz<span class="hljs-number">2</span><br><span class="hljs-attribute">cd</span> iana-etc-<span class="hljs-number">2</span>.<span class="hljs-number">20</span><br><span class="hljs-attribute">make</span><br><span class="hljs-attribute">make</span> install<br><span class="hljs-attribute">cd</span> ..<br><span class="hljs-attribute">rm</span> -rf iana-etc-<span class="hljs-number">2</span>.<span class="hljs-number">20</span><br></code></pre></td></tr></table></figure>

<h2 id="16）M4-1-4-10"><a href="#16）M4-1-4-10" class="headerlink" title="16）M4-1.4.10"></a>16）<code>M4-1.4.10</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf m4-1.4.10.tar.bz2<br><span class="hljs-keyword">cd</span> m4-1.4.10<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf m4-1.4.10<br></code></pre></td></tr></table></figure>

<h2 id="17）Bison-2-3"><a href="#17）Bison-2-3" class="headerlink" title="17）Bison-2.3"></a>17）<code>Bison-2.3</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf bison-2.3.tar.bz2<br><span class="hljs-keyword">cd</span> bison-2.3<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br><span class="hljs-keyword">echo</span> &#x27;<span class="hljs-comment">#define YYENABLE_NLS 1&#x27; &gt;&gt; config.h</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf bison-2.3<br></code></pre></td></tr></table></figure>

<h2 id="18）Ncurses-5-6"><a href="#18）Ncurses-5-6" class="headerlink" title="18）Ncurses-5.6"></a>18）<code>Ncurses-5.6</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf ncurses-<span class="hljs-number">5.6</span>.tar.gz<br>cd ncurses-<span class="hljs-number">5.6</span><br>patch -Np1 -i ../ncurses-<span class="hljs-number">5.6</span>-coverity_fixes-<span class="hljs-number">1</span>.patch<br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr --with-shared --without-debug --enable-widec<br>make<br>make install<br>chmod -v <span class="hljs-number">644</span> <span class="hljs-regexp">/usr/</span>lib/libncurses++w.a<br>mv -v <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/libncursesw.so.5* /</span>lib<br>ln -sfv ..<span class="hljs-regexp">/../</span>lib<span class="hljs-regexp">/libncursesw.so.5 /u</span>sr<span class="hljs-regexp">/lib/</span>libncursesw.so<br><br><span class="hljs-keyword">for</span> lib <span class="hljs-keyword">in</span> curses ncurses form panel menu ; <span class="hljs-keyword">do</span> \<br>    rm -vf <span class="hljs-regexp">/usr/</span>lib/lib<span class="hljs-variable">$&#123;lib&#125;</span>.so ; \<br>    echo <span class="hljs-string">&quot;INPUT(-l$&#123;lib&#125;w)&quot;</span> &gt;<span class="hljs-regexp">/usr/</span>lib/lib<span class="hljs-variable">$&#123;lib&#125;</span>.so ; \<br>    ln -sfv lib<span class="hljs-variable">$&#123;lib&#125;</span>w.a <span class="hljs-regexp">/usr/</span>lib/lib<span class="hljs-variable">$&#123;lib&#125;</span>.a ; \<br>done<br>ln -sfv libncurses++w.a <span class="hljs-regexp">/usr/</span>lib/libncurses++.a<br><br>rm -vf <span class="hljs-regexp">/usr/</span>lib/libcursesw.so<br>echo <span class="hljs-string">&quot;INPUT(-lncursesw)&quot;</span> &gt;<span class="hljs-regexp">/usr/</span>lib/libcursesw.so<br>ln -sfv libncurses.so <span class="hljs-regexp">/usr/</span>lib/libcurses.so<br>ln -sfv libncursesw.a <span class="hljs-regexp">/usr/</span>lib/libcursesw.a<br>ln -sfv libncurses.a <span class="hljs-regexp">/usr/</span>lib/libcurses.a<br><br>make distclean<br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr --with-shared --without-normal \<br>  --without-debug --without-cxx-binding<br>make sources libs<br>cp -av lib<span class="hljs-regexp">/lib*.so.5* /u</span>sr/lib<br><br>cd ..<br>rm -rf ncurses-<span class="hljs-number">5.6</span><br></code></pre></td></tr></table></figure>

<h2 id="19）Procps-3-2-7"><a href="#19）Procps-3-2-7" class="headerlink" title="19）Procps-3.2.7"></a>19）<code>Procps-3.2.7</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xvf procps-<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">7</span>.tar.gz<br><span class="hljs-attribute">cd</span> procps-<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">make</span><br><span class="hljs-attribute">make</span> install<br><span class="hljs-attribute">cd</span> ..<br><span class="hljs-attribute">rm</span> -rf procps-<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">7</span><br></code></pre></td></tr></table></figure>

<h2 id="20）Libtool-1-5-24"><a href="#20）Libtool-1-5-24" class="headerlink" title="20）Libtool-1.5.24"></a>20）<code>Libtool-1.5.24</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf libtool-1.5.24.tar.gz<br><span class="hljs-keyword">cd</span> libtool-1.5.24<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf libtool-1.5.24<br></code></pre></td></tr></table></figure>

<h2 id="21）Perl-5-8-8"><a href="#21）Perl-5-8-8" class="headerlink" title="21）Perl-5.8.8"></a>21）<code>Perl-5.8.8</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf perl-<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span>.tar.bz2<br>cd perl-<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span><br>echo <span class="hljs-string">&quot;127.0.0.1 localhost $(hostname)&quot;</span> &gt; <span class="hljs-regexp">/etc/</span>hosts<br>.<span class="hljs-regexp">/configure.gnu --prefix=/u</span>sr \<br>-Dman1dir=<span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/man/m</span>an1 \<br>-Dman3dir=<span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/man/m</span>an3 \<br>-Dpager=<span class="hljs-string">&quot;/usr/bin/less -isR&quot;</span><br>make<br>make install<br>cd ..<br>rm -rf perl-<span class="hljs-number">5.8</span>.<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure>

<h2 id="22）Readline-5-2"><a href="#22）Readline-5-2" class="headerlink" title="22）Readline-5.2"></a>22）<code>Readline-5.2</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf readline-<span class="hljs-number">5.2</span>.tar.gz<br>cd readline-<span class="hljs-number">5.2</span><br>sed -i <span class="hljs-string">&#x27;/MV.*old/d&#x27;</span> Makefile.<span class="hljs-keyword">in</span><br>sed -i <span class="hljs-string">&#x27;/&#123;OLDSUFF&#125;/c:&#x27;</span> support/shlib-install<br>patch -Np1 -i ../readline-<span class="hljs-number">5.2</span>-fixes-<span class="hljs-number">3</span>.patch<br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr --libdir=/lib<br>make SHLIB_LIBS=-lncurses<br>make install<br>mv -v <span class="hljs-regexp">/lib/</span>lib&#123;readline,history&#125;.a <span class="hljs-regexp">/usr/</span>lib<br>rm -v <span class="hljs-regexp">/lib/</span>lib&#123;readline,history&#125;.so<br>ln -sfv ..<span class="hljs-regexp">/../</span>lib<span class="hljs-regexp">/libreadline.so.5 /u</span>sr<span class="hljs-regexp">/lib/</span>libreadline.so<br>ln -sfv ..<span class="hljs-regexp">/../</span>lib<span class="hljs-regexp">/libhistory.so.5 /u</span>sr<span class="hljs-regexp">/lib/</span>libhistory.so<br>cd ..<br>rm -rf readline-<span class="hljs-number">5.2</span><br></code></pre></td></tr></table></figure>

<h2 id="23）Zlib-1-2-3"><a href="#23）Zlib-1-2-3" class="headerlink" title="23）Zlib-1.2.3"></a>23）<code>Zlib-1.2.3</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf zlib-<span class="hljs-number">1.2</span>.<span class="hljs-number">3</span>.tar.gz<br>cd zlib-<span class="hljs-number">1.2</span>.<span class="hljs-number">3</span><br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr --shared --libdir=/lib<br>make<br>make install<br>rm -v <span class="hljs-regexp">/lib/</span>libz.so<br>ln -sfv ..<span class="hljs-regexp">/../</span>lib<span class="hljs-regexp">/libz.so.1.2.3 /u</span>sr<span class="hljs-regexp">/lib/</span>libz.so<br>make clean<br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr<br>make<br>make install<br>chmod -v <span class="hljs-number">644</span> <span class="hljs-regexp">/usr/</span>lib/libz.a<br>cd ..<br>rm -rf zlib-<span class="hljs-number">1.2</span>.<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<h2 id="24）Autoconf-2-61"><a href="#24）Autoconf-2-61" class="headerlink" title="24）Autoconf-2.61"></a>24）<code>Autoconf-2.61</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf autoconf-2.61.tar.bz2<br><span class="hljs-keyword">cd</span> autoconf-2.61<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf autoconf-2.61<br></code></pre></td></tr></table></figure>

<h2 id="25）Automake-1-10"><a href="#25）Automake-1-10" class="headerlink" title="25）Automake-1.10"></a>25）<code>Automake-1.10</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf automake-1.10.tar.bz2<br><span class="hljs-keyword">cd</span> automake-1.10<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf automake-1.10<br></code></pre></td></tr></table></figure>

<h2 id="26）Bash-3-2"><a href="#26）Bash-3-2" class="headerlink" title="26）Bash-3.2"></a>26）<code>Bash-3.2</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf bash-3.2.tar.gz<br><span class="hljs-keyword">cd</span> bash-3.2<br>tar -xvf <span class="hljs-string">../bash-doc-3.2.tar.gz</span><br>sed -i <span class="hljs-string">&quot;s|htmldir = @htmldir@|htmldir = /usr/share/doc/bash-3.2|&quot;</span> \<br>    Makefile.in<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../bash-3.2-fixes-5.patch</span><br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--bindir=/bin</span> \<br>    <span class="hljs-params">--without-bash-malloc</span> <span class="hljs-params">--with-installed-readline</span><br>make<br>sed -i &#x27;s/LANG/LC_ALL/&#x27; tests/intl.tests<br>sed -i &#x27;s@tests@&amp; &lt;<span class="hljs-string">/dev/tty</span>@&#x27; tests/run-test<br>chown -Rv nobody <span class="hljs-string">./</span><br>su-tools nobody -s <span class="hljs-string">/bin/bash</span> -c <span class="hljs-string">&quot;make tests&quot;</span><br>make install<br>exec <span class="hljs-string">/bin/bash</span> <span class="hljs-params">--login</span> +h<br></code></pre></td></tr></table></figure>

<h2 id="27）Bzip2-1-0-4"><a href="#27）Bzip2-1-0-4" class="headerlink" title="27）Bzip2-1.0.4"></a>27）<code>Bzip2-1.0.4</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xvf bzip<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span>.tar.gz<br><span class="hljs-attribute">cd</span> bzip<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">patch</span> -Np<span class="hljs-number">1</span> -i ../bzip<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span>-install_docs-<span class="hljs-number">1</span>.patch<br><span class="hljs-attribute">make</span> -f Makefile-libbz<span class="hljs-number">2</span>_so<br><span class="hljs-attribute">make</span> clean<br><span class="hljs-attribute">make</span><br><span class="hljs-attribute">make</span> PREFIX=/usr install<br><span class="hljs-attribute">cp</span> -v bzip<span class="hljs-number">2</span>-shared /bin/bzip<span class="hljs-number">2</span><br><span class="hljs-attribute">cp</span> -av libbz<span class="hljs-number">2</span>.so* /lib<br><span class="hljs-attribute">ln</span> -sv http://.cnblogs.com/lib/libbz<span class="hljs-number">2</span>.so.<span class="hljs-number">1</span>.<span class="hljs-number">0</span> /usr/lib/libbz<span class="hljs-number">2</span>.so<br><span class="hljs-attribute">rm</span> -v /usr/bin/&#123;bunzip<span class="hljs-number">2</span>,bzcat,bzip<span class="hljs-number">2</span>&#125;<br><span class="hljs-attribute">ln</span> -sv bzip<span class="hljs-number">2</span> /bin/bunzip<span class="hljs-number">2</span><br><span class="hljs-attribute">ln</span> -sv bzip<span class="hljs-number">2</span> /bin/bzcat<br><span class="hljs-attribute">cd</span> ..<br><span class="hljs-attribute">rm</span> -rf bzip<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>

<h2 id="28）Diffutils-2-8-1"><a href="#28）Diffutils-2-8-1" class="headerlink" title="28）Diffutils-2.8.1"></a>28）<code>Diffutils-2.8.1</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf diffutils-2.8.1.tar.gz<br><span class="hljs-keyword">cd</span> diffutils-2.8.1<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../diffutils-2.8.1-i18n-1.patch</span><br>touch man/diff.1<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf diffutils-2.8.1<br></code></pre></td></tr></table></figure>

<h2 id="29）File-4-21"><a href="#29）File-4-21" class="headerlink" title="29）File-4.21"></a>29）<code>File-4.21</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xvf <span class="hljs-keyword">file</span>-<span class="hljs-number">4.21</span>.tar.gz<br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">file</span>-<span class="hljs-number">4.21</span><br>./configure --prefix=/usr<br><span class="hljs-keyword">make</span><br><span class="hljs-keyword">make</span> install<br><span class="hljs-keyword">cd</span> ..<br>rm -rf <span class="hljs-keyword">file</span>-<span class="hljs-number">4.21</span><br></code></pre></td></tr></table></figure>

<h2 id="30）Findutils-4-2-31"><a href="#30）Findutils-4-2-31" class="headerlink" title="30）Findutils-4.2.31"></a>30）<code>Findutils-4.2.31</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf findutils-<span class="hljs-number">4.2</span>.<span class="hljs-number">31</span>.tar.gz<br>cd findutils-<span class="hljs-number">4.2</span>.<span class="hljs-number">31</span><br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr --libexecdir=<span class="hljs-regexp">/usr/</span>lib/findutils \<br>--localstatedir=<span class="hljs-regexp">/var/</span>lib/locate<br>make<br>make install<br>mv -v <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/find /</span>bin<br>sed -i -e <span class="hljs-string">&#x27;s/find:=$&#123;BINDIR&#125;/find:=\/bin/&#x27;</span> <span class="hljs-regexp">/usr/</span>bin/updatedb<br>cd ..<br>rm -rf findutils-<span class="hljs-number">4.2</span>.<span class="hljs-number">31</span><br></code></pre></td></tr></table></figure>

<h2 id="31）Flex-2-5-33"><a href="#31）Flex-2-5-33" class="headerlink" title="31）Flex-2.5.33"></a>31）<code>Flex-2.5.33</code></h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar xvf flex-<span class="hljs-number">2.5</span>.<span class="hljs-number">33</span>.tar.bz2<br>cd flex-<span class="hljs-number">2.5</span>.<span class="hljs-number">33</span><br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr<br>make<br>make install<br>ln -sv libfl.a <span class="hljs-regexp">/usr/</span>lib/libl.a<br>cat &gt; <span class="hljs-regexp">/usr/</span>bin/lex &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>#!<span class="hljs-regexp">/bin/</span>sh<br># Begin <span class="hljs-regexp">/usr/</span>bin/lex<br><br>exec <span class="hljs-regexp">/usr/</span>bin/flex -l <span class="hljs-string">&quot;$@&quot;</span><br><br># End <span class="hljs-regexp">/usr/</span>bin/lex<br>EOF<br>chmod -v <span class="hljs-number">755</span> <span class="hljs-regexp">/usr/</span>bin/lex<br>cd ..<br>rm -rf flex-<span class="hljs-number">2.5</span>.<span class="hljs-number">33</span><br></code></pre></td></tr></table></figure>

<h2 id="32）GRUB-0-97"><a href="#32）GRUB-0-97" class="headerlink" title="32）GRUB-0.97"></a>32）<code>GRUB-0.97</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf grub-<span class="hljs-number">0.97</span>.tar.gz<br>cd grub-<span class="hljs-number">0.97</span><br>patch -Np1 -i ../grub-<span class="hljs-number">0.97</span>-disk_geometry-<span class="hljs-number">1</span>.patch<br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr<br>make<br>make install<br>mkdir -v <span class="hljs-regexp">/boot/g</span>rub<br>cp -v <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/grub/i</span>386-pc<span class="hljs-regexp">/stage&#123;1,2&#125; /</span>boot/grub<br>cd ..<br>rm -rf grub-<span class="hljs-number">0.97</span><br></code></pre></td></tr></table></figure>

<h2 id="33）Gawk-3-1-5"><a href="#33）Gawk-3-1-5" class="headerlink" title="33）Gawk-3.1.5"></a>33）<code>Gawk-3.1.5</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf gawk-3.1.5.tar.bz2<br><span class="hljs-keyword">cd</span> gawk-3.1.5<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../gawk-3.1.5-segfault_fix-1.patch</span><br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--libexecdir=/usr/lib</span><br>cat &gt;&gt; config.h &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment">#define HAVE_LANGINFO_CODESET 1</span><br><span class="hljs-comment">#define HAVE_LC_MESSAGES 1</span><br>EOF<br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf gawk-3.1.5<br></code></pre></td></tr></table></figure>

<h2 id="34）Gettext-0-16-1"><a href="#34）Gettext-0-16-1" class="headerlink" title="34）Gettext-0.16.1"></a>34）<code>Gettext-0.16.1</code></h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar xvf <span class="hljs-keyword">gettext</span>-<span class="hljs-number">0.16</span>.<span class="hljs-number">1</span>.tar.gz<br>cd <span class="hljs-keyword">gettext</span>-<span class="hljs-number">0.16</span>.<span class="hljs-number">1</span><br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr<br>make<br>make install<br>cd ..<br>rm -rf <span class="hljs-keyword">gettext</span>-<span class="hljs-number">0.16</span>.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<h2 id="35）Grep-2-5-1a"><a href="#35）Grep-2-5-1a" class="headerlink" title="35）Grep-2.5.1a"></a>35）<code>Grep-2.5.1a</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xvf <span class="hljs-keyword">grep</span>-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span><span class="hljs-keyword">a</span>.tar.bz2<br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">grep</span>-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span><span class="hljs-keyword">a</span><br>patch -Np1 -i ../<span class="hljs-keyword">grep</span>-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span><span class="hljs-keyword">a</span>-redhat_fixes-<span class="hljs-number">2</span>.patch<br>chmod +<span class="hljs-keyword">x</span> tests/fmbtest.<span class="hljs-keyword">sh</span><br>./configure --prefix=/usr --bindir=/bin<br><span class="hljs-keyword">make</span><br><span class="hljs-keyword">make</span> install<br><span class="hljs-keyword">cd</span> ..<br>rm -rf <span class="hljs-keyword">grep</span>-<span class="hljs-number">2.5</span>.<span class="hljs-number">1</span><span class="hljs-keyword">a</span><br></code></pre></td></tr></table></figure>

<h2 id="36）Groff-1-18-1-4"><a href="#36）Groff-1-18-1-4" class="headerlink" title="36）Groff-1.18.1.4"></a>36）<code>Groff-1.18.1.4</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf groff-<span class="hljs-number">1.18</span>.<span class="hljs-number">1.4</span>.tar.gz<br>cd groff-<span class="hljs-number">1.18</span>.<span class="hljs-number">1.4</span><br>patch -Np1 -i ../groff-<span class="hljs-number">1.18</span>.<span class="hljs-number">1.4</span>-debian_fixes-<span class="hljs-number">1</span>.patch<br>sed -i -e <span class="hljs-string">&#x27;s/2010/002D/&#x27;</span> -e <span class="hljs-string">&#x27;s/2212/002D/&#x27;</span> \<br>-e <span class="hljs-string">&#x27;s/2018/0060/&#x27;</span> -e <span class="hljs-string">&#x27;s/2019/0027/&#x27;</span> font<span class="hljs-regexp">/devutf8/</span>R.proto<br>PAGE=A4 .<span class="hljs-regexp">/configure --prefix=/u</span>sr --enable-multibyte<br>make<br>make install<br>ln -sv eqn <span class="hljs-regexp">/usr/</span>bin/geqn<br>ln -sv tbl <span class="hljs-regexp">/usr/</span>bin/gtbl<br>cd ..<br>rm -rf groff-<span class="hljs-number">1.18</span>.<span class="hljs-number">1.4</span><br></code></pre></td></tr></table></figure>

<h2 id="37）Gzip-1-3-12"><a href="#37）Gzip-1-3-12" class="headerlink" title="37）Gzip-1.3.12"></a>37）<code>Gzip-1.3.12</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xvf gzip-<span class="hljs-number">1.3</span>.<span class="hljs-number">12</span>.tar.gz<br>cd gzip-<span class="hljs-number">1.3</span>.<span class="hljs-number">12</span><br>.<span class="hljs-regexp">/configure --prefix=/u</span>sr --bindir=/bin<br>make<br>make install<br>mv -v <span class="hljs-regexp">/bin/</span>&#123;gzexe,uncompress,zcmp,zdiff,zegrep&#125; <span class="hljs-regexp">/usr/</span>bin<br>mv -v <span class="hljs-regexp">/bin/</span>&#123;zfgrep,zforce,zgrep,zless,zmore,znew&#125; <span class="hljs-regexp">/usr/</span>bin<br>cd ..<br>rm -rf gzip-<span class="hljs-number">1.3</span>.<span class="hljs-number">12</span><br></code></pre></td></tr></table></figure>

<h2 id="38）Inetutils-1-5"><a href="#38）Inetutils-1-5" class="headerlink" title="38）Inetutils-1.5"></a>38）<code>Inetutils-1.5</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf inetutils-1.5.tar.gz<br><span class="hljs-keyword">cd</span> inetutils-1.5<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../inetutils-1.5-no_server_man_pages-2.patch</span><br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--libexecdir=/usr/sbin</span> \<br><span class="hljs-params">--sysconfdir=/etc</span> <span class="hljs-params">--localstatedir=/var</span> \<br><span class="hljs-params">--disable-ifconfig</span> <span class="hljs-params">--disable-logger</span> <span class="hljs-params">--disable-syslogd</span> \<br><span class="hljs-params">--disable-whois</span> <span class="hljs-params">--disable-servers</span><br>make<br>make install<br>mv -v <span class="hljs-string">/usr/bin/ping</span> <span class="hljs-string">/bin</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf inetutils-1.5<br></code></pre></td></tr></table></figure>

<h2 id="39）IPRoute2-2-6-20-070313"><a href="#39）IPRoute2-2-6-20-070313" class="headerlink" title="39）IPRoute2-2.6.20-070313"></a>39）<code>IPRoute2-2.6.20-070313</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xvf iproute<span class="hljs-number">2</span>-<span class="hljs-number">2</span>.<span class="hljs-number">6</span>.<span class="hljs-number">20</span>-<span class="hljs-number">070313</span>.tar.gz<br><span class="hljs-attribute">cd</span> iproute-<span class="hljs-number">2</span>.<span class="hljs-number">6</span>.<span class="hljs-number">20</span>-<span class="hljs-number">070313</span><br><span class="hljs-attribute">sed</span> -i -e &#x27;/tc-bfifo.<span class="hljs-number">8</span>/d&#x27; -e &#x27;/tc-pfifo.<span class="hljs-number">8</span>/s/pbfifo/bfifo/&#x27; Makefile<br><span class="hljs-attribute">make</span> SBINDIR=/sbin<br><span class="hljs-attribute">make</span> SBINDIR=/sbin install<br><span class="hljs-attribute">mv</span> -v /sbin/arpd /usr/sbin<br><span class="hljs-attribute">cd</span> ..<br><span class="hljs-attribute">rm</span> -rf iproute-<span class="hljs-number">2</span>.<span class="hljs-number">6</span>.<span class="hljs-number">20</span>-<span class="hljs-number">070313</span><br></code></pre></td></tr></table></figure>

<h2 id="40）Kbd-1-12"><a href="#40）Kbd-1-12" class="headerlink" title="40）Kbd-1.12"></a>40）<code>Kbd-1.12</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf kbd-1.12.tar.bz2<br><span class="hljs-keyword">cd</span> kbd-1.12<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../kbd-1.12-backspace-1.patch</span><br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../kbd-1.12-gcc4_fixes-1.patch</span><br><span class="hljs-string">./configure</span> <span class="hljs-params">--datadir=/lib/kbd</span><br>make<br>make install<br>mv -v <span class="hljs-string">/usr/bin/</span>&#123;kbd_mode,openvt,setfont&#125; <span class="hljs-string">/bin</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf kbd-1.12<br></code></pre></td></tr></table></figure>

<h2 id="41）Less-406"><a href="#41）Less-406" class="headerlink" title="41）Less-406"></a>41）<code>Less-406</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf less-406.tar.gz<br><span class="hljs-keyword">cd</span> less-406<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--sysconfdir=/etc</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf less-406<br></code></pre></td></tr></table></figure>

<h2 id="42）Make-3-81"><a href="#42）Make-3-81" class="headerlink" title="42）Make-3.81"></a>42）<code>Make-3.81</code></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim">tar xvf <span class="hljs-keyword">make</span>-<span class="hljs-number">3.81</span>.tar.bz2<br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">make</span>-<span class="hljs-number">3.81</span><br>./configure --prefix=/usr<br><span class="hljs-keyword">make</span><br><span class="hljs-keyword">make</span> install<br><span class="hljs-keyword">cd</span> ..<br>rm -rf <span class="hljs-keyword">make</span>-<span class="hljs-number">3.81</span><br></code></pre></td></tr></table></figure>

<h2 id="43）Man-DB-2-4-4"><a href="#43）Man-DB-2-4-4" class="headerlink" title="43）Man-DB-2.4.4"></a>43）<code>Man-DB-2.4.4</code></h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs stata">tar xvf <span class="hljs-keyword">man</span>-<span class="hljs-keyword">db</span>-2.4.4.tar.gz<br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">man</span>-<span class="hljs-keyword">db</span>-2.4.4<br>mv <span class="hljs-keyword">man</span>/<span class="hljs-keyword">de</span>&#123;_DE.88591,&#125;<br>mv <span class="hljs-keyword">man</span>/es&#123;_ES.88591,&#125;<br>mv <span class="hljs-keyword">man</span>/it&#123;_IT.88591,&#125;<br>mv <span class="hljs-keyword">man</span>/ja&#123;_JP.eucJP,&#125;<br>sed -i &#x27;s,\*_\*,??,&#x27; <span class="hljs-keyword">man</span>/Makefile.<span class="hljs-keyword">in</span><br>sed -i -<span class="hljs-keyword">e</span> &#x27;\%\t/usr/<span class="hljs-keyword">man</span>%<span class="hljs-keyword">d</span>&#x27; -<span class="hljs-keyword">e</span> &#x27;\%\t/usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">man</span>%<span class="hljs-keyword">d</span>&#x27; src/man_db.<span class="hljs-keyword">conf</span>.<span class="hljs-keyword">in</span><br><span class="hljs-keyword">cat</span> &gt;&gt; <span class="hljs-keyword">include</span>/manconfig.<span class="hljs-keyword">h</span>.<span class="hljs-keyword">in</span> &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>#define WEB_BROWSER <span class="hljs-string">&quot;exec /usr/bin/lynx&quot;</span><br>#define COL <span class="hljs-string">&quot;/usr/bin/col&quot;</span><br>#define VGRIND <span class="hljs-string">&quot;/usr/bin/vgrind&quot;</span><br>#define GRAP <span class="hljs-string">&quot;/usr/bin/grap&quot;</span><br>EOF<br>patch -Np1 -i ../<span class="hljs-keyword">man</span>-<span class="hljs-keyword">db</span>-2.4.4-fixes-1.patch<br>./configure --prefix=/usr --enable-mb-groff --disable-setuid<br>make<br>make install<br><span class="hljs-keyword">cat</span> &gt;&gt; convert-mans &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>#!/bin/<span class="hljs-keyword">sh</span> -<span class="hljs-keyword">e</span><br>FROM=<span class="hljs-string">&quot;$1&quot;</span><br>TO=<span class="hljs-string">&quot;$2&quot;</span><br>shift ; shift<br><span class="hljs-keyword">while</span> [ $# -gt 0 ]<br><span class="hljs-keyword">do</span><br><span class="hljs-keyword">FILE</span>=<span class="hljs-string">&quot;$1&quot;</span><br>shift<br>iconv -f <span class="hljs-string">&quot;$FROM&quot;</span> -t <span class="hljs-string">&quot;$TO&quot;</span> <span class="hljs-string">&quot;$FILE&quot;</span> &gt;.tmp.iconv<br>mv .tmp.iconv <span class="hljs-string">&quot;$FILE&quot;</span><br>done<br>EOF<br>install -m755 convert-mans /usr/bin<br><span class="hljs-keyword">mkdir</span> -p /usr/share/<span class="hljs-keyword">man</span>/<span class="hljs-keyword">en</span><br>cp -rv <span class="hljs-keyword">man</span> /usr/share/<span class="hljs-keyword">man</span>/<span class="hljs-keyword">en</span><br><span class="hljs-keyword">cd</span> ..<br><span class="hljs-keyword">rm</span> -rf <span class="hljs-keyword">man</span>-<span class="hljs-keyword">db</span>-2.4.4<br></code></pre></td></tr></table></figure>

<h2 id="44）Mktemp-1-5"><a href="#44）Mktemp-1-5" class="headerlink" title="44）Mktemp-1.5"></a>44）<code>Mktemp-1.5</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf mktemp-1.5.tar.gz<br><span class="hljs-keyword">cd</span> mktemp-1.5<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../mktemp-1.5-add_tempfile-3.patch</span><br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--with-libc</span><br>make<br>make install<br>make install-tempfile<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf <span class="hljs-keyword">cd</span> mktemp-1.5<br></code></pre></td></tr></table></figure>

<h2 id="45）Module-Init-Tools-3-2-2"><a href="#45）Module-Init-Tools-3-2-2" class="headerlink" title="45）Module-Init-Tools-3.2.2"></a>45）<code>Module-Init-Tools-3.2.2</code></h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs smali">tar xvf module-init-tools-3.2.2.tar.bz2<br>cd module-init-tools-3.2.2<br>patch -Np1 -i ../module-init-tools-3.2.2-modprobe-1.patch<br><span class="hljs-keyword">.</span>/configure<br>make check<br>make distclean<br><span class="hljs-keyword">.</span>/configure --prefix=/ --enable-zlib<br>make<br>make INSTALL=install install<br>cd ..<br>rm -rf module-init-tools-3.2.2<br></code></pre></td></tr></table></figure>

<h2 id="46）Patch-2-5-4"><a href="#46）Patch-2-5-4" class="headerlink" title="46）Patch-2.5.4"></a>46）<code>Patch-2.5.4</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf patch-2.5.4.tar.gz<br><span class="hljs-keyword">cd</span> patch-2.5.4<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br>make<br>make install<br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf patch-2.5.4<br></code></pre></td></tr></table></figure>

<h2 id="47）Psmisc-22-5"><a href="#47）Psmisc-22-5" class="headerlink" title="47）Psmisc-22.5"></a>47）<code>Psmisc-22.5</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xvf psmisc-22.5.tar.gz<br><span class="hljs-keyword">cd</span> psmisc-22.5<br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span> <span class="hljs-params">--exec-prefix=</span><span class="hljs-string">&quot;&quot;</span><br>make<br>make install<br>mv -v <span class="hljs-string">/bin/pstree</span>* <span class="hljs-string">/usr/bin</span><br>ln -sv killall <span class="hljs-string">/bin/pidof</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">..</span><br>rm -rf psmisc-22.5<br></code></pre></td></tr></table></figure>

<h2 id="48）Shadow-4-0-18-1"><a href="#48）Shadow-4-0-18-1" class="headerlink" title="48）Shadow-4.0.18.1"></a>48）<code>Shadow-4.0.18.1</code></h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar xvf shadow-<span class="hljs-number">4.0</span>.<span class="hljs-number">18.1</span>.tar.bz2<br>cd shadow-<span class="hljs-number">4.0</span>.<span class="hljs-number">18.1</span><br>patch -Np1 -i ../shadow-<span class="hljs-number">4.0</span>.<span class="hljs-number">18.1</span>-useradd_fix-<span class="hljs-number">2</span>.patch<br>.<span class="hljs-regexp">/configure --libdir=/</span>lib --sysconfdir=/etc --enable-shared \<br>--without-selinux<br>sed -i <span class="hljs-string">&#x27;s/groups$(EXEEXT) //&#x27;</span> src/Makefile<br><span class="hljs-keyword">find</span> man -name Makefile -exec sed -i <span class="hljs-string">&#x27;s/groups\.1 / /&#x27;</span> &#123;&#125; \;<br>sed -i -e <span class="hljs-string">&#x27;s/ ko//&#x27;</span> -e <span class="hljs-string">&#x27;s/ zh_CN zh_TW//&#x27;</span> man/Makefile<br><br><span class="hljs-keyword">for</span> i in de es fi fr id it pt_BR; <span class="hljs-keyword">do</span><br>    convert-mans UTF-<span class="hljs-number">8</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">1</span> man<span class="hljs-regexp">/$&#123;i&#125;/</span>*.?<br>done<br><br><span class="hljs-keyword">for</span> i in cs hu pl; <span class="hljs-keyword">do</span><br>    convert-mans UTF-<span class="hljs-number">8</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">2</span> man<span class="hljs-regexp">/$&#123;i&#125;/</span>*.?<br>done<br><br>convert-mans UTF-<span class="hljs-number">8</span> EUC-JP man<span class="hljs-regexp">/ja/</span>*.?<br>convert-mans UTF-<span class="hljs-number">8</span> KOI8-R man<span class="hljs-regexp">/ru/</span>*.?<br>convert-mans UTF-<span class="hljs-number">8</span> ISO-<span class="hljs-number">8859</span>-<span class="hljs-number">9</span> man<span class="hljs-regexp">/tr/</span>*.?<br><br><br>sed -i -e <span class="hljs-string">&#x27;s@#MD5_CRYPT_ENAB.no@MD5_CRYPT_ENAB yes@&#x27;</span> \<br>    -e <span class="hljs-string">&#x27;s@/var/spool/mail@/var/mail@&#x27;</span> etc/login.defs<br>sed -i <span class="hljs-string">&#x27;s@DICTPATH.*@DICTPATH\t/lib/cracklib/pw_dict@&#x27;</span> \<br>    etc/login.defs<br><br>make <br>make install<br>mv -v <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/passwd /</span>bin<br><br>mv -v <span class="hljs-regexp">/lib/</span>libshadow.*a <span class="hljs-regexp">/usr/</span>lib<br>rm -v <span class="hljs-regexp">/lib/</span>libshadow.so<br>ln -sfv ..<span class="hljs-regexp">/../</span>lib<span class="hljs-regexp">/libshadow.so.0 /u</span>sr<span class="hljs-regexp">/lib/</span>libshadow.so<br><br>pwconv<br>grpconv<br><br>useradd -D -b /home<br>sed -i <span class="hljs-string">&#x27;s/yes/no/&#x27;</span> <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/useradd<br><br>passwd root<br></code></pre></td></tr></table></figure>

<h2 id="49）Sysklogd-1-4-1"><a href="#49）Sysklogd-1-4-1" class="headerlink" title="49）Sysklogd-1.4.1"></a>49）<code>Sysklogd-1.4.1</code></h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs stata">tar xf sysklogd-1.4.1.tar.bz2<br><span class="hljs-keyword">cd</span> sysklogd-1.4.1<br>patch -Np1 -i ../sysklogd-1.4.1-fixes-2.patch<br>patch -Np1 -i ../sysklogd-1.4.1-8bit-1.patch<br>make<br>make install<br><br><span class="hljs-keyword">cat</span> &gt; /etc/syslog.<span class="hljs-keyword">conf</span> &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin /etc/syslog.<span class="hljs-keyword">conf</span><br><br>auth,authpriv.* -/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/auth.<span class="hljs-keyword">log</span><br><span class="hljs-comment">*.*;auth,authpriv.none -/var/log/sys.log</span><br>daemon.* -/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/daemon.<span class="hljs-keyword">log</span><br>kern.* -/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/kern.<span class="hljs-keyword">log</span><br>mail.* -/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/mail.<span class="hljs-keyword">log</span><br>user.* -/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/user.<span class="hljs-keyword">log</span><br><span class="hljs-comment">*.emerg *</span><br><br># End /etc/syslog.<span class="hljs-keyword">conf</span><br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="50）Sysvinit-2-86"><a href="#50）Sysvinit-2-86" class="headerlink" title="50）Sysvinit-2.86"></a>50）<code>Sysvinit-2.86</code></h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs elixir">tar xf sysvinit<span class="hljs-number">-2.86</span>.tar.bz2<br>cd Sysvinit<span class="hljs-number">-2.86</span><br>sed -i <span class="hljs-string">&#x27;s@Sending processes@&amp; configured via /etc/inittab@g&#x27;</span> \<br>    src/init.c<br>make -C src<br>make -C src install<br><br>cat &gt; <span class="hljs-regexp">/etc/inittab</span> &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment"># Begin /etc/inittab</span><br><br><span class="hljs-symbol">id:</span><span class="hljs-number">3</span><span class="hljs-symbol">:initdefault</span><span class="hljs-symbol">:</span><br><br>si::<span class="hljs-symbol">sysinit:</span>/etc/rc.d/init.d/rc sysinit<br><br><span class="hljs-symbol">l0:</span>0<span class="hljs-symbol">:wait</span><span class="hljs-symbol">:/etc/rc</span>.d/init.d/rc 0<br><span class="hljs-symbol">l1:</span><span class="hljs-symbol">S1:</span><span class="hljs-symbol">wait:</span>/etc/rc.d/init.d/rc <span class="hljs-number">1</span><br><span class="hljs-symbol">l2:</span><span class="hljs-number">2</span><span class="hljs-symbol">:wait</span><span class="hljs-symbol">:/etc/rc</span>.d/init.d/rc <span class="hljs-number">2</span><br><span class="hljs-symbol">l3:</span><span class="hljs-number">3</span><span class="hljs-symbol">:wait</span><span class="hljs-symbol">:/etc/rc</span>.d/init.d/rc <span class="hljs-number">3</span><br><span class="hljs-symbol">l4:</span><span class="hljs-number">4</span><span class="hljs-symbol">:wait</span><span class="hljs-symbol">:/etc/rc</span>.d/init.d/rc <span class="hljs-number">4</span><br><span class="hljs-symbol">l5:</span><span class="hljs-number">5</span><span class="hljs-symbol">:wait</span><span class="hljs-symbol">:/etc/rc</span>.d/init.d/rc <span class="hljs-number">5</span><br><span class="hljs-symbol">l6:</span><span class="hljs-number">6</span><span class="hljs-symbol">:wait</span><span class="hljs-symbol">:/etc/rc</span>.d/init.d/rc <span class="hljs-number">6</span><br><br><span class="hljs-symbol">ca:</span><span class="hljs-number">12345</span><span class="hljs-symbol">:ctrlaltdel</span><span class="hljs-symbol">:/sbin/shutdown</span> -t1 -a -r now<br><br><span class="hljs-symbol">su:</span><span class="hljs-symbol">S016:</span><span class="hljs-symbol">once:</span>/sbin/sulogin<br><br><span class="hljs-number">1</span><span class="hljs-symbol">:</span><span class="hljs-number">2345</span><span class="hljs-symbol">:respawn</span><span class="hljs-symbol">:/sbin/agetty</span> tty1 <span class="hljs-number">9600</span><br><span class="hljs-number">2</span><span class="hljs-symbol">:</span><span class="hljs-number">2345</span><span class="hljs-symbol">:respawn</span><span class="hljs-symbol">:/sbin/agetty</span> tty2 <span class="hljs-number">9600</span><br><span class="hljs-number">3</span><span class="hljs-symbol">:</span><span class="hljs-number">2345</span><span class="hljs-symbol">:respawn</span><span class="hljs-symbol">:/sbin/agetty</span> tty3 <span class="hljs-number">9600</span><br><span class="hljs-number">4</span><span class="hljs-symbol">:</span><span class="hljs-number">2345</span><span class="hljs-symbol">:respawn</span><span class="hljs-symbol">:/sbin/agetty</span> tty4 <span class="hljs-number">9600</span><br><span class="hljs-number">5</span><span class="hljs-symbol">:</span><span class="hljs-number">2345</span><span class="hljs-symbol">:respawn</span><span class="hljs-symbol">:/sbin/agetty</span> tty5 <span class="hljs-number">9600</span><br><span class="hljs-number">6</span><span class="hljs-symbol">:</span><span class="hljs-number">2345</span><span class="hljs-symbol">:respawn</span><span class="hljs-symbol">:/sbin/agetty</span> tty6 <span class="hljs-number">9600</span><br><br><span class="hljs-comment"># End /etc/inittab</span><br>EOF<br><br><br></code></pre></td></tr></table></figure>

<h2 id="51）Tar-1-18"><a href="#51）Tar-1-18" class="headerlink" title="51）Tar-1.18"></a>51）<code>Tar-1.18</code></h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">tar xf tar-1.18.tar.bz2<br>cd Tar-1.18<br>./configure <span class="hljs-attribute">--prefix</span>=/usr <span class="hljs-attribute">--bindir</span>=/bin <span class="hljs-attribute">--libexecdir</span>=/usr/sbin<br>make<br>make install<br></code></pre></td></tr></table></figure>

<h2 id="52）Texinfo-4-9"><a href="#52）Texinfo-4-9" class="headerlink" title="52）Texinfo-4.9"></a>52）<code>Texinfo-4.9</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar xf texinfo-4.9.tar.bz2<br><span class="hljs-keyword">cd</span> texinfo-4.9<br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../texinfo-4.9-multibyte-1.patch</span><br><span class="hljs-keyword">patch</span> -Np1 -i <span class="hljs-string">../texinfo-4.9-tempfile_fix-1.patch</span><br><span class="hljs-string">./configure</span> <span class="hljs-params">--prefix=/usr</span><br>make<br>make install<br>make TEXMF=<span class="hljs-string">/usr/share/texmf</span> install-tex<br><span class="hljs-keyword">cd</span> <span class="hljs-string">/usr/share/info</span><br>rm dir<br>for f in *<br>do install-info $f dir 2&gt;<span class="hljs-string">/dev/null</span><br>done<br><br></code></pre></td></tr></table></figure>

<h2 id="53）Udev-113"><a href="#53）Udev-113" class="headerlink" title="53）Udev-113"></a>53）<code>Udev-113</code></h2><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs dts">tar xf udev<span class="hljs-number">-113.</span>tar.bz2<br>cd udex<span class="hljs-number">-113</span><br>tar -xvf ../udev-config<span class="hljs-number">-6.3</span>.tar.bz2<br><br>install -dv <span class="hljs-meta-keyword">/lib/</span>&#123;firmware,udev<span class="hljs-meta-keyword">/devices/</span>&#123;pts,shm&#125;&#125;<br>mknod -m0666 <span class="hljs-meta-keyword">/lib/</span>udev<span class="hljs-meta-keyword">/devices/</span>null c <span class="hljs-number">1</span> <span class="hljs-number">3</span><br>ln -sv <span class="hljs-meta-keyword">/proc/</span>self/fd <span class="hljs-meta-keyword">/lib/</span>udev<span class="hljs-meta-keyword">/devices/</span>fd<br>ln -sv <span class="hljs-meta-keyword">/proc/</span>self<span class="hljs-meta-keyword">/fd/</span><span class="hljs-number">0</span> <span class="hljs-meta-keyword">/lib/</span>udev<span class="hljs-meta-keyword">/devices/</span>stdin<br>ln -sv <span class="hljs-meta-keyword">/proc/</span>self<span class="hljs-meta-keyword">/fd/</span><span class="hljs-number">1</span> <span class="hljs-meta-keyword">/lib/</span>udev<span class="hljs-meta-keyword">/devices/</span>stdout<br>ln -sv <span class="hljs-meta-keyword">/proc/</span>self<span class="hljs-meta-keyword">/fd/</span><span class="hljs-number">2</span> <span class="hljs-meta-keyword">/lib/</span>udev<span class="hljs-meta-keyword">/devices/</span>stderr<br>ln -sv <span class="hljs-meta-keyword">/proc/</span>kcore <span class="hljs-meta-keyword">/lib/</span>udev<span class="hljs-meta-keyword">/devices/</span>core<br><br>make EXTRAS=<span class="hljs-string">&quot;`echo extras/*/`&quot;</span><br>make DESTDIR=/ EXTRAS=<span class="hljs-string">&quot;`echo extras/*/`&quot;</span> install<br>cp -v etc<span class="hljs-meta-keyword">/udev/</span>rules.d/[<span class="hljs-number">0</span><span class="hljs-number">-9</span>]* <span class="hljs-meta-keyword">/etc/</span>udev/rules.d/<br><br>cd udev-config<span class="hljs-number">-6.3</span><br>make install<br><br>make install-doc<br>make install-extra-doc<br>cd ..<br>install -m644 -v docs/writing_udev_rules/index.html \<br>    <span class="hljs-meta-keyword">/usr/</span>share<span class="hljs-meta-keyword">/doc/</span>udev<span class="hljs-number">-113</span>/index.html<br></code></pre></td></tr></table></figure>

<h2 id="54）Util-linux-2-12r"><a href="#54）Util-linux-2-12r" class="headerlink" title="54）Util-linux-2.12r"></a>54）<code>Util-linux-2.12r</code></h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gams">tar xf util-linux<span class="hljs-number">-2.12</span>r.tar.bz2<br>cd util-linux<span class="hljs-number">-2.12</span>r<br>sed -e <span class="hljs-string">&#x27;s@etc/adjtime@var/lib/hwclock/adjtime@g&#x27;</span> \<br>    -i <span class="hljs-symbol">$</span>(grep -rl <span class="hljs-string">&#x27;/etc/adjtime&#x27;</span> .)<br>mkdir -pv /var/lib/hwclock<br><span class="hljs-function"><span class="hljs-title">patch</span></span> -Np1 -i ../util-linux<span class="hljs-number">-2.12</span>r-cramfs<span class="hljs-number">-1.</span>patch<br><span class="hljs-function"><span class="hljs-title">patch</span></span> -Np1 -i ../util-linux<span class="hljs-number">-2.12</span>r-lseek<span class="hljs-number">-1.</span>patch<br>./configure<br>make HAVE_KILL=<span class="hljs-keyword">yes</span> HAVE_SLN=<span class="hljs-keyword">yes</span><br>make HAVE_KILL=<span class="hljs-keyword">yes</span> HAVE_SLN=<span class="hljs-keyword">yes</span> install<br><br></code></pre></td></tr></table></figure>

<h2 id="55）Vim-7-1"><a href="#55）Vim-7-1" class="headerlink" title="55）Vim-7.1"></a>55）<code>Vim-7.1</code></h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs stata">tar xf vim-7.1.tar.bz2<br><span class="hljs-keyword">cd</span> vim71<br>patch -Np1 -i ../vim-7.1-fixes-1.patch<br>patch -Np1 -i ../vim-7.1-mandir-1.patch<br>echo &#x27;#define SYS_VIMRC_FILE <span class="hljs-string">&quot;/etc/vimrc&quot;</span>&#x27; &gt;&gt; src/feature.<span class="hljs-keyword">h</span><br>./configure --prefix=/usr --enable-multibyte<br>make<br>make install<br>ln -sv vim /usr/bin/vi<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">L</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;&quot;</span> fr it <span class="hljs-keyword">pl</span> <span class="hljs-keyword">ru</span>; <span class="hljs-keyword">do</span><br>    ln -sv vim.1 /usr/share/<span class="hljs-keyword">man</span>/<span class="hljs-variable">$L</span>/man1/vi.1<br>done<br>ln -sv ../vim/vim71/doc /usr/share/doc/vim-7.1<br><br><span class="hljs-keyword">cat</span> &gt; /etc/vimrc &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>&quot; Begin /etc/vimrc<br><br><span class="hljs-keyword">set</span> nocompatible<br><span class="hljs-keyword">set</span> backspace=2<br><span class="hljs-keyword">syntax</span> <span class="hljs-keyword">on</span><br><span class="hljs-keyword">if</span> (&amp;term == <span class="hljs-string">&quot;iterm&quot;</span>) || (&amp;term == <span class="hljs-string">&quot;putty&quot;</span>)<br>  <span class="hljs-keyword">set</span> background=dark<br>endif<br><br>&quot; End /etc/vimrc<br>EOF<br><br>vim -c &#x27;:options&#x27;<br></code></pre></td></tr></table></figure>

<h2 id="56）再次清理系统"><a href="#56）再次清理系统" class="headerlink" title="56）再次清理系统"></a>56）再次清理系统</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">logout<br>chroot <span class="hljs-variable">$LFS</span> <span class="hljs-regexp">/tools/</span>bin/env -i \<br>    HOME=/root TERM=<span class="hljs-variable">$TERM</span> PS1=<span class="hljs-string">&#x27;\u:\w\$ &#x27;</span> \<br>    PATH=<span class="hljs-regexp">/bin:/u</span>sr<span class="hljs-regexp">/bin:/</span>sbin:<span class="hljs-regexp">/usr/</span>sbin \<br>    <span class="hljs-regexp">/tools/</span>bin/bash --login<br><br><span class="hljs-regexp">/tools/</span>bin<span class="hljs-regexp">/find /</span>&#123;,usr/&#125;&#123;bin,lib,sbin&#125; -type f \<br>  -exec <span class="hljs-regexp">/tools/</span>bin/strip --strip-debug <span class="hljs-string">&#x27;&#123;&#125;&#x27;</span> <span class="hljs-string">&#x27;;&#x27;</span><br>  <br><br></code></pre></td></tr></table></figure>

<h2 id="57）最终的清理"><a href="#57）最终的清理" class="headerlink" title="57）最终的清理"></a>57）最终的清理</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">chroot <span class="hljs-string">&quot;$LFS&quot;</span> <span class="hljs-regexp">/usr/</span>bin/env -i \<br>    HOME=/root TERM=<span class="hljs-string">&quot;$TERM&quot;</span> PS1=<span class="hljs-string">&#x27;\u:\w\$ &#x27;</span> \<br>    PATH=<span class="hljs-regexp">/bin:/u</span>sr<span class="hljs-regexp">/bin:/</span>sbin:<span class="hljs-regexp">/usr/</span>sbin \<br>    <span class="hljs-regexp">/bin/</span>bash --login<br></code></pre></td></tr></table></figure>

<h1 id="四、"><a href="#四、" class="headerlink" title="四、"></a>四、</h1><h2 id="1）LFS-Bootscripts-6-3"><a href="#1）LFS-Bootscripts-6-3" class="headerlink" title="1）LFS-Bootscripts-6.3"></a>1）<code>LFS-Bootscripts-6.3</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cd</span> sources<br><span class="hljs-attribute">tar</span> xf lfs-bootscripts-<span class="hljs-number">6</span>.<span class="hljs-number">3</span>.tar.bz<span class="hljs-number">2</span><br><span class="hljs-attribute">cd</span> lfs-bootscripts-<span class="hljs-number">6</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">make</span> install<br></code></pre></td></tr></table></figure>

<h2 id="2）配置-setclock-脚本"><a href="#2）配置-setclock-脚本" class="headerlink" title="2）配置 setclock 脚本"></a>2）配置 <code>setclock</code> 脚本</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">cat &gt; <span class="hljs-regexp">/etc/</span>sysconfig/clock &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin <span class="hljs-regexp">/etc/</span>sysconfig/clock<br><br>UTC=<span class="hljs-number">1</span><br><br># End <span class="hljs-regexp">/etc/</span>sysconfig/clock<br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="3）配置-Linux-控制台"><a href="#3）配置-Linux-控制台" class="headerlink" title="3）配置 Linux 控制台"></a>3）配置 <code>Linux</code> 控制台</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gradle">cat &gt; <span class="hljs-regexp">/etc/</span>sysconfig/console &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin <span class="hljs-regexp">/etc/</span>sysconfig/console<br><br># End <span class="hljs-regexp">/etc/</span>sysconfig/console<br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="4）创建-etc-inputrc-文件"><a href="#4）创建-etc-inputrc-文件" class="headerlink" title="4）创建 /etc/inputrc 文件"></a>4）创建 <code>/etc/inputrc</code> 文件</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">cat &gt; /etc/inputrc &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment"># Begin /etc/inputrc</span><br><span class="hljs-comment"># Modified by Chris Lynn &lt;roryo@roryo.dynup.net&gt;</span><br><br><span class="hljs-comment"># Allow the command prompt to wrap to the next line</span><br><span class="hljs-built_in">set</span> horizontal-scroll-mode Off<br><br><span class="hljs-comment"># Enable 8bit input</span><br><span class="hljs-built_in">set</span> meta-flag On<br><span class="hljs-built_in">set</span> input-meta On<br><br><span class="hljs-comment"># Turns off 8th bit stripping</span><br><span class="hljs-built_in">set</span> <span class="hljs-built_in">convert</span>-meta Off<br><br><span class="hljs-comment"># Keep the 8th bit for display</span><br><span class="hljs-built_in">set</span> output-meta On<br><br><span class="hljs-comment"># none, visible or audible</span><br><span class="hljs-built_in">set</span> bell-style <span class="hljs-literal">none</span><br><br><span class="hljs-comment"># All of the following map the escape sequence of the value</span><br><span class="hljs-comment"># contained in the 1st argument to the readline specific functions</span><br><span class="hljs-string">&quot;\eOd&quot;</span>: backward-<span class="hljs-built_in">word</span><br><span class="hljs-string">&quot;\eOc&quot;</span>: forward-<span class="hljs-built_in">word</span><br><br><span class="hljs-comment"># for linux console</span><br><span class="hljs-string">&quot;\e[1~&quot;</span>: beginning-<span class="hljs-keyword">of</span>-<span class="hljs-built_in">line</span><br><span class="hljs-string">&quot;\e[4~&quot;</span>: <span class="hljs-keyword">end</span>-<span class="hljs-keyword">of</span>-<span class="hljs-built_in">line</span><br><span class="hljs-string">&quot;\e[5~&quot;</span>: beginning-<span class="hljs-keyword">of</span>-history<br><span class="hljs-string">&quot;\e[6~&quot;</span>: <span class="hljs-keyword">end</span>-<span class="hljs-keyword">of</span>-history<br><span class="hljs-string">&quot;\e[3~&quot;</span>: <span class="hljs-built_in">delete</span>-<span class="hljs-keyword">char</span><br><span class="hljs-string">&quot;\e[2~&quot;</span>: quoted-insert<br><br><span class="hljs-comment"># for xterm</span><br><span class="hljs-string">&quot;\eOH&quot;</span>: beginning-<span class="hljs-keyword">of</span>-<span class="hljs-built_in">line</span><br><span class="hljs-string">&quot;\eOF&quot;</span>: <span class="hljs-keyword">end</span>-<span class="hljs-keyword">of</span>-<span class="hljs-built_in">line</span><br><br><span class="hljs-comment"># for Konsole</span><br><span class="hljs-string">&quot;\e[H&quot;</span>: beginning-<span class="hljs-keyword">of</span>-<span class="hljs-built_in">line</span><br><span class="hljs-string">&quot;\e[F&quot;</span>: <span class="hljs-keyword">end</span>-<span class="hljs-keyword">of</span>-<span class="hljs-built_in">line</span><br><br><span class="hljs-comment"># End /etc/inputrc</span><br><span class="hljs-literal">EOF</span><br></code></pre></td></tr></table></figure>

<h2 id="5）Bash-Shell-启动文件"><a href="#5）Bash-Shell-启动文件" class="headerlink" title="5）Bash Shell 启动文件"></a>5）Bash Shell 启动文件</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs routeros">cat &gt; /etc<span class="hljs-built_in">/profile </span>&lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment"># Begin /etc/profile</span><br><br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">INPUTRC</span>=/etc/inputrc<br><br>source /etc/bashrc<br><br><span class="hljs-attribute">LANG</span>=<span class="hljs-string">&quot;zh_CN&quot;</span> ; <span class="hljs-builtin-name">export</span> LANG<br>[ <span class="hljs-string">&quot;<span class="hljs-variable">$TERM</span>&quot;</span> = <span class="hljs-string">&quot;linux&quot;</span> ] &amp;&amp; <span class="hljs-attribute">LC_ALL</span>=C<br><span class="hljs-builtin-name">export</span> LC_ALL<br><br><span class="hljs-comment"># End /etc/profile</span><br>EOF<br><br>cat &gt; /etc/bashrc &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment"># Begin /etc/bashrc</span><br><br>alias <span class="hljs-attribute">ls</span>=<span class="hljs-string">&#x27;ls --color=auto&#x27;</span><br>alias <span class="hljs-attribute">ll</span>=<span class="hljs-string">&#x27;ls -l&#x27;</span><br><span class="hljs-comment">#eval $(dircolors -b /etc/dircolors)</span><br><br><span class="hljs-comment"># Setup a red prompt for root and a green one for users.</span><br><span class="hljs-attribute">NORMAL</span>=<span class="hljs-string">&quot;\[\e[0m\]&quot;</span><br><span class="hljs-attribute">RED</span>=<span class="hljs-string">&quot;\[\e[1;31m\]&quot;</span><br><span class="hljs-attribute">GREEN</span>=<span class="hljs-string">&quot;\[\e[1;32m\]&quot;</span><br><span class="hljs-attribute">YELLOW</span>=<span class="hljs-string">&quot;\[\e[1;33m\]&quot;</span><br><span class="hljs-attribute">BLUB</span>=<span class="hljs-string">&quot;\[\e[1;34m\]&quot;</span><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$EUID</span> == 0 ]] ; then<br><span class="hljs-attribute">PS1</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$RED</span>[\u@<span class="hljs-variable">$YELLOW</span>\h <span class="hljs-variable">$BLUB</span>\W<span class="hljs-variable">$RED</span>]\\$ <span class="hljs-variable">$NORMAL</span>&quot;</span><br><span class="hljs-keyword">else</span><br><span class="hljs-attribute">PS1</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$GREEN</span>[\u@<span class="hljs-variable">$YELLOW</span>\h <span class="hljs-variable">$BLUB</span>\W<span class="hljs-variable">$GREEN</span>]\\$ <span class="hljs-variable">$NORMAL</span>&quot;</span><br>fi<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;`locale charmap 2&gt;/dev/null`&quot;</span> = <span class="hljs-string">&quot;UTF-8&quot;</span> ]<br>then<br>stty iutf8<br>fi<br><br><span class="hljs-comment"># End /etc/bashrc</span><br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="6）配置-localnet-脚本"><a href="#6）配置-localnet-脚本" class="headerlink" title="6）配置 localnet 脚本"></a>6）配置 <code>localnet</code> 脚本</h2><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;HOSTNAME=mylinux&quot;</span> &gt; <span class="hljs-regexp">/etc/</span>sysconfig/network<br><br></code></pre></td></tr></table></figure>

<h2 id="7）配置-etc-hosts-文件"><a href="#7）配置-etc-hosts-文件" class="headerlink" title="7）配置 /etc/hosts 文件"></a>7）配置 <code>/etc/hosts</code> 文件</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">cat &gt; <span class="hljs-regexp">/etc/</span>hosts &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin <span class="hljs-regexp">/etc/</span>hosts (network card version)<br><br><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span> mylinux localhost<br><br># End <span class="hljs-regexp">/etc/</span>hosts (network card version)<br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="8）配置网络脚本"><a href="#8）配置网络脚本" class="headerlink" title="8）配置网络脚本"></a>8）配置网络脚本</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">cd /etc/sysconfig/network-devices<br>mkdir -v ifconfig.eth0<br>cat &gt; ifconfig.eth0/ipv4 &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-attribute">ONBOOT</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attribute">SERVICE</span>=ipv4-static<br><span class="hljs-attribute">IP</span>=10.1.1.2<br><span class="hljs-attribute">GATEWAY</span>=10.1.1.1<br><span class="hljs-attribute">PREFIX</span>=24<br><span class="hljs-attribute">BROADCAST</span>=10.1.1.255<br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="9）创建-etc-resolv-conf-文件"><a href="#9）创建-etc-resolv-conf-文件" class="headerlink" title="9）创建 /etc/resolv.conf 文件"></a>9）创建 <code>/etc/resolv.conf</code> 文件</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">cat &gt; <span class="hljs-regexp">/etc/</span>resolv.conf &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin <span class="hljs-regexp">/etc/</span>resolv.conf<br><br>nameserver <span class="hljs-number">202.106</span>.<span class="hljs-number">196.115</span><br><br># End <span class="hljs-regexp">/etc/</span>resolv.conf<br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="10）创建-etc-fstab-文件"><a href="#10）创建-etc-fstab-文件" class="headerlink" title="10）创建 /etc/fstab 文件"></a>10）创建 <code>/etc/fstab</code> 文件</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gradle">cat &gt; <span class="hljs-regexp">/etc/</span>fstab &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br># Begin <span class="hljs-regexp">/etc/</span>fstab<br><br># <span class="hljs-keyword">file</span> system mount-point type <span class="hljs-keyword">options</span> <span class="hljs-keyword">dump</span> fsck<br># order<br><br><span class="hljs-regexp">/dev/</span>hda2 / ext3 defaults <span class="hljs-number">1</span> <span class="hljs-number">1</span><br><span class="hljs-regexp">/dev/</span>hda1 swap swap pri=<span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>proc /proc proc defaults <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>sysfs /sys sysfs defaults <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>devpts <span class="hljs-regexp">/dev/</span>pts devpts gid=<span class="hljs-number">4</span>,mode=<span class="hljs-number">620</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><br>shm <span class="hljs-regexp">/dev/</span>shm tmpfs defaults <span class="hljs-number">0</span> <span class="hljs-number">0</span><br># End <span class="hljs-regexp">/etc/</span>fstab<br>EOF<br></code></pre></td></tr></table></figure>

<h2 id="11）Linux-2-6-22-5"><a href="#11）Linux-2-6-22-5" class="headerlink" title="11）Linux-2.6.22.5"></a>11）<code>Linux-2.6.22.5</code></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd /sources<br>tar xvf linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span>.tar.bz2<br>cd linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br>make mrproper<br>make menuconfig<br>make<br>make modules_install<br>cp -v arch<span class="hljs-regexp">/i386/</span>boot<span class="hljs-regexp">/bzImage /</span>boot/lfskernel-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br>cp -v System.map <span class="hljs-regexp">/boot/</span>System.map-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br>cp -v .config <span class="hljs-regexp">/boot/</span>config-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br>install -d <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/doc/</span>linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br>cp -r Documentation<span class="hljs-regexp">/* /u</span>sr<span class="hljs-regexp">/share/</span>doc/linux-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span><br><br></code></pre></td></tr></table></figure>

<h2 id="12）使-LFS-系统能够启动"><a href="#12）使-LFS-系统能够启动" class="headerlink" title="12）使 LFS 系统能够启动"></a>12）使 LFS 系统能够启动</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs awk">grub<br><br>root (hd0,<span class="hljs-number">1</span>) <span class="hljs-comment"># hda2</span><br>setup (hd0)  <span class="hljs-comment"># hda1</span><br>quit<br><br>cat &gt; <span class="hljs-regexp">/boot/g</span>rub/menu.lst &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment"># Begin /boot/grub/menu.lst</span><br><span class="hljs-comment"># By default boot the first menu entry.</span><br>default <span class="hljs-number">0</span><br><br><span class="hljs-comment"># Allow 30 seconds before booting the default.</span><br>timeout <span class="hljs-number">30</span><br><br><span class="hljs-comment"># Use prettier colors.</span><br>color green<span class="hljs-regexp">/black light-green/</span>black<br><br><span class="hljs-comment"># The first entry is for LFS.</span><br>title LFS <span class="hljs-number">6.3</span><br>root (hd0,<span class="hljs-number">1</span>)<br>kernel <span class="hljs-regexp">/boot/</span>lfskernel-<span class="hljs-number">2.6</span>.<span class="hljs-number">22.5</span> root=<span class="hljs-regexp">/dev/</span>hda2<br>EOF<br><br>mkdir -v <span class="hljs-regexp">/etc/g</span>rub<br>ln -sv <span class="hljs-regexp">/boot/g</span>rub<span class="hljs-regexp">/menu.lst /</span>etc/grub<br><br>echo <span class="hljs-number">6.3</span> &gt; <span class="hljs-regexp">/etc/</span>lfs-release<br><br>logout<br></code></pre></td></tr></table></figure>

<h2 id="13）重启系统"><a href="#13）重启系统" class="headerlink" title="13）重启系统"></a>13）重启系统</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">umount -v <span class="hljs-variable">$LFS</span><span class="hljs-regexp">/dev/</span>pts<br>umount -v <span class="hljs-variable">$LFS</span><span class="hljs-regexp">/dev/</span>shm<br>umount -v <span class="hljs-variable">$LFS</span>/dev<br>umount -v <span class="hljs-variable">$LFS</span>/proc<br>umount -v <span class="hljs-variable">$LFS</span>/sys<br><br>umount -v <span class="hljs-variable">$LFS</span><br><br>umount -v <span class="hljs-variable">$LFS</span>/usr<br>umount -v <span class="hljs-variable">$LFS</span>/home<br>umount -v <span class="hljs-variable">$LFS</span><br><br>shutdown -r now<br></code></pre></td></tr></table></figure>

<h2>测试</h2>

<p><img src="http://butatree.site:8888/images/2021/04/24/LFS6.3.png" srcset="/img/loading.gif"></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/LFS/">LFS</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/LFS/">LFS</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/d942e47f/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Linux-Crontab</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/c5f1e618/">
                        <span class="hidden-mobile">Linux-sudo</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "Mwdu7VOQpQQD3cKW6SsRSt4f-gzGzoHsz",
          app_key: "XAg4RThXdR3JX0BNAF0axveE",
          placeholder: "说点什么",
          path: window.location.pathname,
          avatar: "mp",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: true,
          recordIP: false,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            <b>"总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次"</b>
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            <b>"总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人"</b>
          </span>
      
    
  </div>


  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        豫ICP备2021006301号
      </a>
    </span>
    
  </div>


  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
