

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="ButATree">
  <meta name="keywords" content="">
  <title>Mysql-数据库-操作基础 - ButATree&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>ButATree</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-notebook"></i>
                关于
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/about/">
                    <i class="iconfont icon-user-fill"></i>
                    个人
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="http://download.butatree.site">
                    
                    下载
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                相关链接
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/4l2p20.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Mysql-数据库-操作基础">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      ButATree
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-04-03 12:53" pubdate>
        2021年4月3日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.4k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      71
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Mysql-数据库-操作基础</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2021年4月3日 晚上
                
              </p>
            
            <div class="markdown-body">
              <blockquote>
<p><a target="_blank" rel="noopener" href="https://www.mysql.com/"><code>MySQL</code>官网</a></p>
</blockquote>
<center><h1>MySQL数据类型</center></h1>

<p>​    在 <code>MySQL</code> 中，有三种主要的类型：文本、数字和日期/时间类型。</p>
<p><strong><code>Text</code> 类型：</strong></p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>CHAR(size)</code></td>
<td>保存固定的长度的字符串。在括号中指定字符串的长度。最多 <code>255</code> 个字符。</td>
</tr>
<tr>
<td><code>VARCHAR(size)</code></td>
<td>保存可变长度的字符串。在括号中指定字符串的最大长度。最多 <code>255</code> 个字符。注释：如果值的长度大于 <code>255</code> ，则被转换为 <code>TEXT</code> 类型。</td>
</tr>
<tr>
<td><code>TINYTEXT</code></td>
<td>存放最大长度为 <code>255</code> 个字符的字符串。</td>
</tr>
<tr>
<td><code>TEXT</code></td>
<td>存放最大长度为 <code>65,535</code> 个字符的字符串。</td>
</tr>
<tr>
<td><code>BLOB</code></td>
<td>用于 <code>BLOBs(Binary Large Objects)</code>。存放最多 <code>65,535</code> 字节的数据。</td>
</tr>
<tr>
<td><code>MEDIUMTEXT</code></td>
<td>存放最大长度为 <code>16,777,215</code> 个字符的字符串。</td>
</tr>
<tr>
<td><code>LONGTEXT</code></td>
<td>存放最大长度为 <code>4,294,967,295</code> 个字符的字符串。</td>
</tr>
<tr>
<td><code>LONGTEXT</code></td>
<td>用于 <code>BLOBs(Binary Large Objects)</code>。存放最多<code>4,294,967,295</code>字节的数据。</td>
</tr>
<tr>
<td><code>ENUM(x,y,z,etc.)</code></td>
<td>允许你输入可能值的列表。可以在 <code>ENUM</code> 列表中列出最大 <code>65535</code> 个值。如果列表中不存在插入的值，则插入空值。注释：这些值是按照你输入的顺序存储的。可以按照此格式输入可能的值：<code>ENUM(&#39;X&#39;,&#39;Y&#39;,&#39;Z&#39;)</code>。</td>
</tr>
<tr>
<td><code>SET</code></td>
<td>与 <code>ENUM</code> 类似，<code>SET</code> 最多只能包含 <code>64</code> 个列表项，不过 <code>SET</code> 可存储一个以上的值。</td>
</tr>
</tbody></table>
<p><strong><code>Number</code> 类型：</strong></p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>TINYINT(size)</code></td>
<td><code>-128 ~ 127</code> 常规。<code>0 ~ 255</code> 无符号 <code>*</code> 。在括号中规定最大位数。</td>
</tr>
<tr>
<td><code>SMALLINT(size)</code></td>
<td><code>-32768 ~ 32767</code> 常规。<code>0 ~ 65535</code> 无符号 <code>*</code> 。在括号中规定最大位数。</td>
</tr>
<tr>
<td><code>MEDIUMINT(size)</code></td>
<td><code>-83886908 ~ 83886907</code> 普通。<code>0 ~ 16777215</code> 无符号 <code>*</code> 。在括号中规定最大位数。</td>
</tr>
<tr>
<td><code>INT(size)</code></td>
<td><code>-2147483648 ~ 2147483647</code> 常规。<code>0 ~ 4294967295</code> 无符号 <code>*</code> 。在括号中规定最大位数。</td>
</tr>
<tr>
<td><code>BIGINT(size)</code></td>
<td><code>-9223372036854775808 ~ 9223372036854775807</code> 常规。<code>0 ~ 184467440737095516115</code> 无符号 <code>*</code> 。在括号中规定最大位数。</td>
</tr>
<tr>
<td><code>FLOAT(size,d)</code></td>
<td>带浮动小数点的小数字。在括号中规定最大位数。在 <code>d</code> 参数中规定小数点右侧的最大位数。</td>
</tr>
<tr>
<td><code>DOUBLE(size,d)</code></td>
<td>带浮动小数点的大数字。在括号中规定最大位数。在 <code>d</code> 参数中规定小数点右侧的最大位数。</td>
</tr>
<tr>
<td><code>DECIMAL(size,d)</code></td>
<td>作为字符串存储的 <code>DOUBLE</code> 类型，允许固定的小数点。</td>
</tr>
</tbody></table>
<blockquote>
<p>这些整数类型拥有额外的选项  <code>UNSIGNED</code> 。通常，整数可以是负数或正数。如果添加 <code>UNSIGNED</code> 属性，那么范围将从 <code>0</code> 开始，而不是某个负数。</p>
</blockquote>
<p><strong><code>Date</code> 类型：</strong></p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>DATE()</code></td>
<td>日期。格式：<code>YYYY-MM-DD</code><br />注释：支持的范围是从 <code>1000-01-01 - 9999-12-31</code></td>
</tr>
<tr>
<td><code>DATETIME()</code></td>
<td>日期和时间的组合。格式：<code>YYYY-MM-DD HH:MM:SS</code><br />注释：支持的范围是从 <code>1000-01-01 00:00:00 - 9999-12-31 23:59:59</code></td>
</tr>
<tr>
<td><code>TIMESTAMP()</code></td>
<td>时间戳。<code>TIMESTAMP</code> 值使用 <code>Unix</code> 纪元（<code>1970-01-01 00:00:00 UTC</code>）至今的描述来存储。格式：<code>YYYY-MM-DD HH:MM:SS</code><br />注释：支持的范围是从 <code>1970-01-01 00:00:01 UTC - 2038-01-09 03:14:07 UTC</code></td>
</tr>
<tr>
<td><code>TIME()</code></td>
<td>时间。格式：<code>HH:MM:SS</code> 注释：支持的范围是从 <code>-838:59:59 - 838:59:59</code></td>
</tr>
<tr>
<td><code>YEAR()</code></td>
<td><code>2</code> 位或 <code>4</code> 位格式的年。<br />注释：<code>4</code> 位格式所允许的值：<code>1901 - 2155</code>。<code>2</code> 位格式所允许的值：<code>70</code> 到 <code>69</code> ，表示从 <code>1970 - 2069</code></td>
</tr>
</tbody></table>
<hr>
<h1 id="一、MySQL-常见版本"><a href="#一、MySQL-常见版本" class="headerlink" title="一、MySQL 常见版本"></a>一、<code>MySQL</code> 常见版本</h1><ul>
<li><code>MySQL Community Server</code> 社区版本，开源免费，但不提供官方技术支持。</li>
<li><code>MySQL Enterprise Edition</code> 企业版本，需付费，试用 <code>30</code> 天。</li>
<li><code>MySQL Cluster</code> 集群版，开源免费。可将几个 <code>MySQL Server</code> 封装成一个 <code>Server</code>。</li>
<li><code>MySQL Cluster CGE</code> 高级集群版，需付费。</li>
</ul>
<h1 id="二、MySQL-安装部署"><a href="#二、MySQL-安装部署" class="headerlink" title="二、MySQL 安装部署"></a>二、<code>MySQL</code> 安装部署</h1><p><code>MySQL</code> ：<code>MySQL</code> 客户端程序</p>
<p><code>MySQL-Server</code> ：<code>MySQL</code> 服务器端程序</p>
<p><strong>源码编译安装：</strong></p>
<p>​    编译工具：<code>configure</code>、<code>cmake</code> 、<code>make</code></p>
<p>​    数据库常用的配置选项：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">-DCMAKE_INSTALL_PREFIX</span>=/PREFIX        <span class="hljs-comment">#指定安装的路径（默认的就是 /usr/local/mysql）</span><br><span class="hljs-attr">-DMYSQL_DATADIR</span>=/data/mysql			  <span class="hljs-comment">#mysql 的数据文件路径</span><br><span class="hljs-attr">-DSYSCONFDIR</span>=/etc					  <span class="hljs-comment">#配置文件路径</span><br><span class="hljs-attr">-DWITH_INNOBASE_STORAGE_ENGINE</span>=<span class="hljs-number">1</span>	  <span class="hljs-comment">#使用 INNOBASE 存储引擎</span><br><span class="hljs-attr">-DWITH_READLINE</span>=<span class="hljs-number">1</span>					  <span class="hljs-comment">#支持批量导入 mysql 数据</span><br><span class="hljs-attr">-DWITH_SSL</span>=system					  <span class="hljs-comment">#mysql 支持ssl</span><br><span class="hljs-attr">-DWITH_ZLIB</span>=system					  <span class="hljs-comment">#支持压缩存储</span><br><span class="hljs-attr">-DMYSQL_TCP_PORT</span>=<span class="hljs-number">3306</span>				  <span class="hljs-comment">#默认端口 3306</span><br><span class="hljs-attr">-DENABLED_LOCAL_INFILE</span>=<span class="hljs-number">1</span>   			  <span class="hljs-comment">#启用加载本地数据</span><br><span class="hljs-attr">-DMYSQL_USER</span>=mysql					  <span class="hljs-comment">#指定 mysql 运行用户</span><br><span class="hljs-attr">-DMYSQL_UNIX_ADDR</span>=/tmp/mysql.sock     <span class="hljs-comment">#默认套接字文件路径</span><br><span class="hljs-attr">-DEXTRA_CHARSETS</span>=all                  <span class="hljs-comment">#是否支持额外的字符集</span><br><span class="hljs-attr">-DDEFAULT_CHARSET</span>=UTF8                <span class="hljs-comment">#默认编码机制</span><br><span class="hljs-attr">-DWITH_DEBUG</span>=<span class="hljs-number">0</span> 						  <span class="hljs-comment">#DEBUG功能设置</span><br></code></pre></td></tr></table></figure>

<p><strong>常见资料：</strong></p>
<ul>
<li><p>服务：<code>mysqld</code>                 </p>
</li>
<li><p>端口：<code>3306</code></p>
</li>
<li><p>主配置文件：<code>/etc/my.cf</code></p>
</li>
<li><p>初始化脚本：<code>mysql_install-db</code></p>
</li>
<li><p>启动命令：<code>mysqld_safe</code> </p>
</li>
<li><p>数据目录：<code>/var/lib/mysql</code></p>
</li>
<li><p>套接字文件：<code>/var/lib/mysql/mysql.sock</code></p>
</li>
<li><p>进程文件：<code>/var/run/mysqld/mysqld.pid</code></p>
<blockquote>
<p>当意外关闭数据库时，再开启时假如开启不了，找到这个，删除再启动</p>
</blockquote>
</li>
</ul>
<p><strong><code>MySQL</code> 登录及退出命令：</strong></p>
<ul>
<li><p>设置密码：<code>mysqladmin -uroot password &#39;123456&#39;</code></p>
</li>
<li><p>登录：<code>mysql -u 用户名 -p 密码 -P 端口 -S 套接字文件</code></p>
<p>​    <code>-p</code>：用户密码</p>
<p>​    <code>-h</code>：登录位置（主机名或 <code>ip</code> 地址）</p>
<p>​    <code>-P</code>：端口号</p>
<p>​    <code>-S</code>：套接字文件</p>
<p>​    退出命令：<code>exit</code> 或 <code>ctrl+d</code></p>
</li>
</ul>
<hr>
<h1 id="三、MySQL-管理命令"><a href="#三、MySQL-管理命令" class="headerlink" title="三、MySQL 管理命令"></a>三、<code>MySQL</code> 管理命令</h1><h2 id="1-yum-安装-MySQL-并启动"><a href="#1-yum-安装-MySQL-并启动" class="headerlink" title="1. yum 安装 MySQL 并启动"></a>1. <code>yum</code> 安装 <code>MySQL</code> 并启动</h2><blockquote>
<p><code>CentOS7</code> 没有 <code>mysql-server</code> 文件</p>
<p>解决：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># 手动获取rpm文件</span><br><span class="hljs-attribute">wget</span> http://repo.mysql.com/mysql-community-release-el<span class="hljs-number">7</span>-<span class="hljs-number">5</span>.noarch.rpm<br><br><span class="hljs-comment"># 安装rpm文件</span><br><span class="hljs-attribute">rpm</span> -ivh mysql-community-release-el<span class="hljs-number">7</span>-<span class="hljs-number">5</span>.noarch.rpm<br><br><span class="hljs-comment"># 安装 mysql-server</span><br><span class="hljs-attribute">yum</span> -y install mysql-server<br></code></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@test</span> opt]<span class="hljs-meta"># yum -y install mysql-server mysql</span><br>[root<span class="hljs-symbol">@test</span> opt]<span class="hljs-meta"># systemctl enable mysqld</span><br>[root<span class="hljs-symbol">@test</span> opt]<span class="hljs-meta"># systemctl start mysqld</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p><a id="demo"><code>root</code> 用户找回自己的密码并修改</a></p>
<p>报错：<code>mysqladmin: connect to server at &#39;localhost&#39; failed error: &#39;Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO)&#39;</code></p>
<ol>
<li><strong>安装完 <code>MySQL</code> 设置 <code>root</code> 密码报错</strong></li>
</ol>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@test ~]# mysqladmin -u root password 123456<br>mysqladmin: connect to server at &#x27;localhost&#x27; failed<br><span class="hljs-keyword">error: </span>&#x27;Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27; (using password: NO)&#x27;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li><strong>停止 <code>MySQL</code> 服务</strong></li>
</ol>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@test</span> ~]<span class="hljs-meta"># systemctl stop mysqld.service</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><strong>安全模式启用</strong></li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@test ~</span>]<span class="hljs-meta"># mysqld_safe --skip-grant-tables &amp;</span><br>[<span class="hljs-meta">1</span>] <span class="hljs-number">2628</span><br>[<span class="hljs-meta">root@test ~</span>]<span class="hljs-meta"># 210403 14:49:33 mysqld_safe Logging to &#x27;/var/log/mysqld.log&#x27;.</span><br><span class="hljs-number">210403</span> <span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">33</span> mysqld_safe Starting mysqld daemon <span class="hljs-keyword">with</span> databases <span class="hljs-keyword">from</span> /<span class="hljs-keyword">var</span>/lib/mysql<br></code></pre></td></tr></table></figure>

<ol start="4">
<li><strong>无密码 <code>root</code> 账号登陆</strong></li>
</ol>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs smali">[root@test etc]<span class="hljs-comment"># mysql -uroot -p</span><br>Enter password: <br>Welcome to the MySQ<span class="hljs-class">L monitor.  Commands end with ;</span><span class="hljs-built_in"> or </span>\g.<br>Your MySQL connection id is 1<br>Server version: 5.6.51 MySQL Community Server (GPL)<br><br>Copyright (c) 2000, 2021, Oracle<span class="hljs-built_in"> and/or </span>its affiliates. All rights reserved.<br><br>Oracle is a registered trademark of Oracle Corporation<span class="hljs-built_in"> and/or </span>its<br>affiliates. Other names may be trademarks of their respective<br>owners.<br><br>Type &#x27;help;&#x27;<span class="hljs-built_in"> or </span>&#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.<br><br>mysql&gt; <br>mysql&gt; use mysql;<br>Reading table information for completion of table<span class="hljs-built_in"> and </span>column names<br>You can turn off this feature to get a quicker startup with -A<br><br>Database changed<br></code></pre></td></tr></table></figure>

<ol start="5">
<li>手动 <code>update</code> 修改密码</li>
</ol>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">mysql&gt; <span class="hljs-keyword">update</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">password</span>=<span class="hljs-keyword">password</span>(&quot;123456&quot;) <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span>=<span class="hljs-string">&#x27;root&#x27;</span> <span class="hljs-keyword">and</span> host=<span class="hljs-string">&#x27;localhost&#x27;</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br><span class="hljs-keyword">Rows</span> matched: <span class="hljs-number">1</span>  Changed: <span class="hljs-number">0</span>  Warnings: <span class="hljs-number">0</span><br><br>mysql&gt; flush <span class="hljs-keyword">privileges</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br><br>mysql&gt; quit<br>Bye<br></code></pre></td></tr></table></figure>

<ol start="6">
<li><strong>重新使用密码登录</strong></li>
</ol>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@test ~]# mysql -uroot -p123456<br><span class="hljs-built_in">Warning</span>: <span class="hljs-keyword">Using</span> a <span class="hljs-keyword">password</span> <span class="hljs-keyword">on</span> the command <span class="hljs-type">line</span> interface can be insecure.<br>Welcome <span class="hljs-keyword">to</span> the MySQL monitor.  Commands <span class="hljs-keyword">end</span> <span class="hljs-keyword">with</span> ; <span class="hljs-keyword">or</span> \g.<br>Your MySQL <span class="hljs-keyword">connection</span> id <span class="hljs-keyword">is</span> <span class="hljs-number">2</span><br><span class="hljs-keyword">Server</span> <span class="hljs-keyword">version</span>: <span class="hljs-number">5.6</span><span class="hljs-number">.51</span> MySQL Community <span class="hljs-keyword">Server</span> (GPL)<br><br>Copyright (c) <span class="hljs-number">2000</span>, <span class="hljs-number">2021</span>, Oracle <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> its affiliates. <span class="hljs-keyword">All</span> rights reserved.<br><br>Oracle <span class="hljs-keyword">is</span> a registered trademark <span class="hljs-keyword">of</span> Oracle Corporation <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> its<br>affiliates. Other names may be trademarks <span class="hljs-keyword">of</span> their respective<br>owners.<br><br><span class="hljs-keyword">Type</span> <span class="hljs-string">&#x27;help;&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;\h&#x27;</span> <span class="hljs-keyword">for</span> help. <span class="hljs-keyword">Type</span> <span class="hljs-string">&#x27;\c&#x27;</span> <span class="hljs-keyword">to</span> clear the <span class="hljs-keyword">current</span> <span class="hljs-keyword">input</span> <span class="hljs-keyword">statement</span>.<br><br>mysql&gt; <br></code></pre></td></tr></table></figure>

<ol start="7">
<li><strong>重新启动 <code>mysql</code></strong></li>
</ol>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@test</span> ~]<span class="hljs-meta"># systemctl restart mysqld</span><br></code></pre></td></tr></table></figure>

<ol start="8">
<li><strong>查看端口号</strong></li>
</ol>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@test</span> ~]<span class="hljs-comment"># netstat -tunlp | grep 3306</span><br>tcp6       0      0 ::<span class="hljs-symbol">:</span><span class="hljs-number">3306</span>                 ::<span class="hljs-symbol">:*</span>                    LISTEN      <span class="hljs-number">1868</span>/mysqld<br></code></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-创建登录用户"><a href="#2-创建登录用户" class="headerlink" title="2. 创建登录用户"></a>2. 创建登录用户</h2><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mel">mysql&gt; create user zhangsan@&#x27;%&#x27; identified by <span class="hljs-string">&#x27;123456&#x27;</span>;<br>Query OK, <span class="hljs-number">0</span> rows affected (<span class="hljs-number">0.00</span> sec)<br>@: 分隔符<br>%: 指任意的远程终端，可以是 localhost，也可以是一个IP（<span class="hljs-number">10.4</span><span class="hljs-number">.7</span><span class="hljs-number">.104</span>）或者网段（<span class="hljs-number">10.4</span><span class="hljs-number">.7</span>.%）<br></code></pre></td></tr></table></figure>

<h2 id="3-测试用户登录"><a href="#3-测试用户登录" class="headerlink" title="3. 测试用户登录"></a>3. 测试用户登录</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@test2 ~]# yum -y install mysql<br>[root@test2 ~]# mysql -u zhangsan -p123456 -h <span class="hljs-number">10.4</span><span class="hljs-number">.7</span><span class="hljs-number">.103</span><br>Welcome <span class="hljs-keyword">to</span> the MariaDB monitor.  Commands <span class="hljs-keyword">end</span> <span class="hljs-keyword">with</span> ; <span class="hljs-keyword">or</span> \g.<br>Your MySQL <span class="hljs-keyword">connection</span> id <span class="hljs-keyword">is</span> <span class="hljs-number">3</span><br><span class="hljs-keyword">Server</span> <span class="hljs-keyword">version</span>: <span class="hljs-number">5.6</span><span class="hljs-number">.51</span> MySQL Community <span class="hljs-keyword">Server</span> (GPL)<br><br>Copyright (c) <span class="hljs-number">2000</span>, <span class="hljs-number">2018</span>, Oracle, MariaDB Corporation Ab <span class="hljs-keyword">and</span> others.<br><br><span class="hljs-keyword">Type</span> <span class="hljs-string">&#x27;help;&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;\h&#x27;</span> <span class="hljs-keyword">for</span> help. <span class="hljs-keyword">Type</span> <span class="hljs-string">&#x27;\c&#x27;</span> <span class="hljs-keyword">to</span> clear the <span class="hljs-keyword">current</span> <span class="hljs-keyword">input</span> <span class="hljs-keyword">statement</span>.<br><br>MySQL [(<span class="hljs-keyword">none</span>)]&gt; <br></code></pre></td></tr></table></figure>

<h2 id="3-用户为自己更改密码"><a href="#3-用户为自己更改密码" class="headerlink" title="3. 用户为自己更改密码"></a>3. 用户为自己更改密码</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">MySQL [(<span class="hljs-keyword">none</span>)]&gt; <span class="hljs-keyword">set</span> <span class="hljs-keyword">password</span>=<span class="hljs-keyword">password</span>(<span class="hljs-string">&#x27;1234567&#x27;</span>);<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></table></figure>

<h2 id="4-root-用户为其他用户找回密码"><a href="#4-root-用户为其他用户找回密码" class="headerlink" title="4. root 用户为其他用户找回密码"></a>4. <code>root</code> 用户为其他用户找回密码</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">mysql&gt; <span class="hljs-keyword">set</span> <span class="hljs-keyword">password</span> <span class="hljs-keyword">for</span> zhangsan@<span class="hljs-string">&#x27;%&#x27;</span> =<span class="hljs-keyword">password</span>(<span class="hljs-string">&#x27;123456&#x27;</span>);<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></table></figure>

<h2 id="5-root-找回自己的密码并修改"><a href="#5-root-找回自己的密码并修改" class="headerlink" title="5. root 找回自己的密码并修改"></a>5. <code>root</code> 找回自己的密码并修改</h2><p><a href="#demo">点击跳转</a></p>
<h2 id="6-创建查询数据库"><a href="#6-创建查询数据库" class="headerlink" title="6. 创建查询数据库"></a>6. 创建查询数据库</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; create database web;<br>Query OK, 1 row affected (0.01 sec)<br><br>mysql&gt; show databases;<br><span class="hljs-code">+--------------------+</span><br>| Database           |<br><span class="hljs-code">+--------------------+</span><br>| information_schema |<br>| mysql              |<br>| performance_schema |<br>| web                |<br><span class="hljs-code">+--------------------+</span><br>4 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="7-创建数据表"><a href="#7-创建数据表" class="headerlink" title="7. 创建数据表"></a>7. 创建数据表</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; use web;<br>Database changed                                #选择要使用的数据库<br>mysql&gt; create table a1(id int , name char(30)); #创建a1表，并添加id和name字段以及类型<br>Query OK, 0 rows affected (0.07 sec)<br><br>mysql&gt; describe a1;                             #查看表结构（字段）<br><span class="hljs-code">+-------+</span>----------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>-------+<br>| Field | Type     | Null | Key | Default | Extra |<br><span class="hljs-code">+-------+</span>----------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>-------+<br>| id    | int(11)  | YES  |     | NULL    |       |<br>| name  | char(30) | YES  |     | NULL    |       |<br><span class="hljs-code">+-------+</span>----------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>-------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<p><strong>复杂一点的</strong></p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">mysql&gt; create table a2 (<br>    -&gt; id int unsigned not null auto_increment,   <span class="hljs-comment">#字段要求为正数、且自增长、主键     </span><br>    -&gt; name char(30) not null default &#x27;&#x27;,         <span class="hljs-comment">#字符型长度30字节，默认值为空格</span><br>    -&gt; age int not null default 0,                <span class="hljs-comment">#字段默认值为0</span><br>    -&gt; primary key (id));                         <span class="hljs-comment">#设置id为主键</span><br>Query OK, 0 rows affected (0.01 sec)<br><br>mysql&gt; describe a2;<br>+-------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> Field </span>|<span class="hljs-string"> Type             </span>|<span class="hljs-string"> Null </span>|<span class="hljs-string"> Key </span>|<span class="hljs-string"> Default </span>|<span class="hljs-string"> Extra          </span>|<br>+-------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> id    </span>|<span class="hljs-string"> int(10) unsigned </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string"> PRI </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string"> auto_increment </span>|<br>|<span class="hljs-string"> name  </span>|<span class="hljs-string"> char(30)         </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string">         </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> age   </span>|<span class="hljs-string"> int(11)          </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> 0       </span>|<span class="hljs-string">                </span>|<br>+-------+------------------+------+-----+---------+----------------+<br>3 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="8-插入数据"><a href="#8-插入数据" class="headerlink" title="8. 插入数据"></a>8. 插入数据</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; insert into a2 (id,name,age) values (1,<span class="hljs-emphasis">&#x27;zhangsan&#x27;</span>,21); #指明插入字段和数据<br>Query OK, 1 row affected (0.00 sec)<br><br>mysql&gt; select * from a2;<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>| id | name     | age |<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>|  1 | zhangsan |  21 |<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>1 row in set (0.00 sec)<br><br>mysql&gt; insert into a2 values (2,<span class="hljs-emphasis">&#x27;lisi&#x27;</span>,20);<br>mysql&gt; insert into a2 values (3,<span class="hljs-emphasis">&#x27;wangwu&#x27;</span>,0);<br>mysql&gt; insert into a2 values (4,<span class="hljs-emphasis">&#x27;xiaoming&#x27;</span>,10),(5,<span class="hljs-emphasis">&#x27;xiaoji&#x27;</span>,25);<br>---<br>mysql&gt; insert into a2 (id,name,age) values (3,<span class="hljs-emphasis">&#x27;wangwu&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h2 id="9-将表-a2-的数据复制到表-a1"><a href="#9-将表-a2-的数据复制到表-a1" class="headerlink" title="9. 将表 a2 的数据复制到表 a1"></a>9. 将表 <code>a2</code> 的数据复制到表 <code>a1</code></h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; select * from a1;<br>mysql&gt; insert into a1 (id,name) select id,name from a2; <br># 查询a2值，并写入到a1<br>mysql&gt; select * from a1;<br><span class="hljs-code">+------+</span>----------+<br>| id   | name     |<br><span class="hljs-code">+------+</span>----------+<br>|    1 | zhangsan |<br>|    2 | lisi     |<br>|    3 | wangwu   |<br>|    4 | xiaoming |<br>|    5 | xiaoji   |<br><span class="hljs-code">+------+</span>----------+<br>5 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="10-删除数据库"><a href="#10-删除数据库" class="headerlink" title="10. 删除数据库"></a>10. 删除数据库</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mysql</span>&gt; drop database web;<br><span class="hljs-attribute">Query</span> OK, <span class="hljs-number">2</span> rows affected (<span class="hljs-number">0</span>.<span class="hljs-number">06</span> sec)<br></code></pre></td></tr></table></figure>

<h2 id="11-删除数据表"><a href="#11-删除数据表" class="headerlink" title="11. 删除数据表"></a>11. 删除数据表</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; drop table a1;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; show tables;<br><span class="hljs-code">+---------------+</span><br>| Tables_in_web |<br><span class="hljs-code">+---------------+</span><br>| a2            |<br><span class="hljs-code">+---------------+</span><br>1 row in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="12-删除表里的数据记录"><a href="#12-删除表里的数据记录" class="headerlink" title="12. 删除表里的数据记录"></a>12. 删除表里的数据记录</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mysql</span>&gt; delete from a<span class="hljs-number">2</span> where id=<span class="hljs-number">5</span>;                 #删除 id=<span class="hljs-number">5</span> 的记录<br><span class="hljs-attribute">mysql</span>&gt; delete from a<span class="hljs-number">2</span> where between <span class="hljs-number">23</span> and <span class="hljs-number">25</span>;    #删除年龄在<span class="hljs-number">23</span>-<span class="hljs-number">25</span>之间的<br></code></pre></td></tr></table></figure>

<p><font color=red>注：库和表的删除用 drop，记录删除用 delete</font></p>
<h2 id="13-修改表中的数据"><a href="#13-修改表中的数据" class="headerlink" title="13. 修改表中的数据"></a>13. 修改表中的数据</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; update a2 set age=21 where id=3;<br>Query OK, 1 row affected (0.00 sec)<br>Rows matched: 1  Changed: 1  Warnings: 0<br><br>mysql&gt; select * from a2;<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>| id | name     | age |<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>|  1 | zhangsan |  21 |<br>|  2 | lisi     |  20 |<br>|  3 | wangwu   |  21 |<br>|  4 | xiaoming |  10 |<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>4 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="14-修改数据表的名称"><a href="#14-修改数据表的名称" class="headerlink" title="14. 修改数据表的名称"></a>14. 修改数据表的名称</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; alter table a2 rename a1;<br>Query OK, 0 rows affected (0.05 sec)<br><br>mysql&gt; select * from a1;<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>| id | name     | age |<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>|  1 | zhangsan |  21 |<br>|  2 | lisi     |  20 |<br>|  3 | wangwu   |  21 |<br>|  4 | xiaoming |  10 |<br><span class="hljs-code">+----+</span>----------<span class="hljs-code">+-----+</span><br>4 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="15-修改数据表的字段类型"><a href="#15-修改数据表的字段类型" class="headerlink" title="15. 修改数据表的字段类型"></a>15. 修改数据表的字段类型</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; describe a1;<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name  | char(30)         | NO   |     |         |                |<br>| age   | int(11)          | NO   |     | 0       |                |<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>3 rows in set (0.00 sec)<br><br>mysql&gt; alter table a1 modify name char(50);<br>Query OK, 4 rows affected (0.04 sec)<br>Records: 4  Duplicates: 0  Warnings: 0<br><br>mysql&gt; describe a1;<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name  | char(50)         | YES  |     | NULL    |                |<br>| age   | int(11)          | NO   |     | 0       |                |<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>3 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="16-修改数据表的字段类型详情"><a href="#16-修改数据表的字段类型详情" class="headerlink" title="16. 修改数据表的字段类型详情"></a>16. 修改数据表的字段类型详情</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; describe a1;<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| Field | Type             | Null | Key | Default | Extra          |<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| name  | char(50)         | YES  |     | NULL    |                |<br>| age   | int(11)          | NO   |     | 0       |                |<br><span class="hljs-code">+-------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>3 rows in set (0.00 sec)<br><br>mysql&gt; alter table a1 change name username char(50) not null default &#x27;<span class="hljs-emphasis">&#x27;;</span><br><span class="hljs-emphasis">Query OK, 0 rows affected (0.11 sec)</span><br><span class="hljs-emphasis">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">mysql&gt; describe a1;</span><br><span class="hljs-emphasis">+----------+------------------+------+-----+---------+----------------+</span><br><span class="hljs-emphasis">| Field    | Type             | Null | Key | Default | Extra          |</span><br><span class="hljs-emphasis">+----------+------------------+------+-----+---------+----------------+</span><br><span class="hljs-emphasis">| id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class="hljs-emphasis">| username | char(50)         | NO   |     |         |                |</span><br><span class="hljs-emphasis">| age      | int(11)          | NO   |     | 0       |                |</span><br><span class="hljs-emphasis">+----------+------------------+------+-----+---------+----------------+</span><br><span class="hljs-emphasis">3 rows in set (0.00 sec)</span><br></code></pre></td></tr></table></figure>

<h2 id="17-添加字段"><a href="#17-添加字段" class="headerlink" title="17. 添加字段"></a>17. 添加字段</h2><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">mysql&gt; describe a1;<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> Field    </span>|<span class="hljs-string"> Type             </span>|<span class="hljs-string"> Null </span>|<span class="hljs-string"> Key </span>|<span class="hljs-string"> Default </span>|<span class="hljs-string"> Extra          </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> id       </span>|<span class="hljs-string"> int(10) unsigned </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string"> PRI </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string"> auto_increment </span>|<br>|<span class="hljs-string"> username </span>|<span class="hljs-string"> char(50)         </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string">         </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> age      </span>|<span class="hljs-string"> int(11)          </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> 0       </span>|<span class="hljs-string">                </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>3 rows in set (0.00 sec)<br><br>mysql&gt; alter table a1 add time datetime;<br>Query OK, 0 rows affected (0.02 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br><br>mysql&gt; describe a1;<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> Field    </span>|<span class="hljs-string"> Type             </span>|<span class="hljs-string"> Null </span>|<span class="hljs-string"> Key </span>|<span class="hljs-string"> Default </span>|<span class="hljs-string"> Extra          </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> id       </span>|<span class="hljs-string"> int(10) unsigned </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string"> PRI </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string"> auto_increment </span>|<br>|<span class="hljs-string"> username </span>|<span class="hljs-string"> char(50)         </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string">         </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> age      </span>|<span class="hljs-string"> int(11)          </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> 0       </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> time     </span>|<span class="hljs-string"> datetime         </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">                </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>4 rows in set (0.00 sec)<br><span class="hljs-comment">#添加位置默认在末尾</span><br><br>mysql&gt; alter table a1 add birthday year first;     <span class="hljs-comment">#添加字段到第一列</span><br>mysql&gt; alter table a1 add sex nchar(1) after id;   <span class="hljs-comment">#添加到指定字段后</span><br><br>mysql&gt; describe a1;<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> Field    </span>|<span class="hljs-string"> Type             </span>|<span class="hljs-string"> Null </span>|<span class="hljs-string"> Key </span>|<span class="hljs-string"> Default </span>|<span class="hljs-string"> Extra          </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> birthday </span>|<span class="hljs-string"> year(4)          </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> id       </span>|<span class="hljs-string"> int(10) unsigned </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string"> PRI </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string"> auto_increment </span>|<br>|<span class="hljs-string"> sex      </span>|<span class="hljs-string"> char(1)          </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> username </span>|<span class="hljs-string"> char(50)         </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string">         </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> age      </span>|<span class="hljs-string"> int(11)          </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> 0       </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> time     </span>|<span class="hljs-string"> datetime         </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">                </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>6 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="18-删除字段"><a href="#18-删除字段" class="headerlink" title="18. 删除字段"></a>18. 删除字段</h2><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">mysql&gt; alter table a1 drop birthday;<br><br>mysql&gt; describe a1;<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> Field    </span>|<span class="hljs-string"> Type             </span>|<span class="hljs-string"> Null </span>|<span class="hljs-string"> Key </span>|<span class="hljs-string"> Default </span>|<span class="hljs-string"> Extra          </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>|<span class="hljs-string"> id       </span>|<span class="hljs-string"> int(10) unsigned </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string"> PRI </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string"> auto_increment </span>|<br>|<span class="hljs-string"> sex      </span>|<span class="hljs-string"> char(1)          </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> username </span>|<span class="hljs-string"> char(50)         </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string">         </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> age      </span>|<span class="hljs-string"> int(11)          </span>|<span class="hljs-string"> NO   </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> 0       </span>|<span class="hljs-string">                </span>|<br>|<span class="hljs-string"> time     </span>|<span class="hljs-string"> datetime         </span>|<span class="hljs-string"> YES  </span>|<span class="hljs-string">     </span>|<span class="hljs-string"> NULL    </span>|<span class="hljs-string">                </span>|<br>+----------+------------------+------+-----+---------+----------------+<br>5 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<h2 id="19-MySQL-用户授权"><a href="#19-MySQL-用户授权" class="headerlink" title="19. MySQL 用户授权"></a>19. <code>MySQL</code> 用户授权</h2><p>授予用户全部权限</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; select user from mysql.user;<br><span class="hljs-code">+----------+</span><br>| user     |<br><span class="hljs-code">+----------+</span><br>| zhangsan |<br>| root     |<br>| root     |<br>|          |<br>| root     |<br>|          |<br>| root     |<br><span class="hljs-code">+----------+</span><br>7 rows in set (0.00 sec)<br><br>mysql&gt; grant all on web.a1 to zhangsan@<span class="hljs-emphasis">&#x27;%&#x27;</span>; #给已存在的用户授权<br>mysql&gt; grant all on web.a1 to butatree@<span class="hljs-emphasis">&#x27;%&#x27;</span> identified by <span class="hljs-emphasis">&#x27;123456&#x27;</span>; #创建用户并授权<br></code></pre></td></tr></table></figure>

<p>取消 <code>butatree</code> 用户的删除库、表、表中数据的权限</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">mysql&gt; <span class="hljs-keyword">revoke</span> <span class="hljs-keyword">drop</span>,<span class="hljs-keyword">delete</span> <span class="hljs-keyword">on</span> web.a1 <span class="hljs-keyword">from</span> butatree@<span class="hljs-string">&#x27;%&#x27;</span>; #取消删除权限（登录butatree测试）<br>mysql&gt; <span class="hljs-keyword">show</span> grants <span class="hljs-keyword">for</span> butatree@<span class="hljs-string">&#x27;%&#x27;</span>;    #查看指定用户的授权<br>+<span class="hljs-comment">---------------------------------------------------------------------------------------------------------------------------------+</span><br>| Grants <span class="hljs-keyword">for</span> butatree@%                                                                                                           |<br>+<span class="hljs-comment">---------------------------------------------------------------------------------------------------------------------------------+</span><br>| <span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">USAGE</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;butatree&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-keyword">PASSWORD</span> <span class="hljs-string">&#x27;*6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9&#x27;</span>                         |<br>| <span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span>, <span class="hljs-keyword">INSERT</span>, <span class="hljs-keyword">UPDATE</span>, <span class="hljs-keyword">CREATE</span>, <span class="hljs-keyword">REFERENCES</span>, <span class="hljs-keyword">INDEX</span>, <span class="hljs-keyword">ALTER</span>, <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span>, <span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">VIEW</span>, <span class="hljs-keyword">TRIGGER</span> <span class="hljs-keyword">ON</span> `web`.`a1` <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;butatree&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> |<br>+<span class="hljs-comment">---------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="hljs-number">2</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql&gt; <span class="hljs-keyword">show</span> grants <span class="hljs-keyword">for</span> zhangsan@<span class="hljs-string">&#x27;%&#x27;</span>;<br>+<span class="hljs-comment">---------------------------------------------------------------------------------------------------------+</span><br>| Grants <span class="hljs-keyword">for</span> zhangsan@%                                                                                   |<br>+<span class="hljs-comment">---------------------------------------------------------------------------------------------------------+</span><br>| <span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">USAGE</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;zhangsan&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-keyword">PASSWORD</span> <span class="hljs-string">&#x27;*6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9&#x27;</span> |<br>| <span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> `web`.`a1` <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;zhangsan&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>                                                    |<br>| <span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> `aa`.`a1` <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;zhangsan&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>                                                     |<br>+<span class="hljs-comment">---------------------------------------------------------------------------------------------------------+</span><br><span class="hljs-number">3</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></table></figure>

<hr>
<h1 id="四、备份和还原"><a href="#四、备份和还原" class="headerlink" title="四、备份和还原"></a>四、备份和还原</h1><h2 id="1-mysqldump-备份："><a href="#1-mysqldump-备份：" class="headerlink" title="1. mysqldump 备份："></a>1. <code>mysqldump</code> 备份：</h2><p><strong>备份：</strong></p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">mysqldump -u 用户名 -p 数据库名 &gt; <span class="hljs-regexp">/备份路径/</span>备份文件名（备份整个数据库）<br>mysqldump -u 用户名 -p 数据库名 表名 &gt; <span class="hljs-regexp">/备份路径/</span>备份文件名（备份数据表）<br></code></pre></td></tr></table></figure>

<ul>
<li>备份多个库：<code>--databases 库1，库2</code></li>
<li>备份所有库：<code>--all-databases</code></li>
<li>备份多个表：库名 表 <code>1</code>  表 <code>2</code></li>
</ul>
<p><strong>还原：</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">mysql</span> 数据库 &lt; 备份文件<br></code></pre></td></tr></table></figure>

<p><font color=green>注意：还原时，若导入的是某表，请指定导入到哪一个库中</font></p>
<h2 id="2-mysqlhotcopy-备份"><a href="#2-mysqlhotcopy-备份" class="headerlink" title="2. mysqlhotcopy 备份"></a>2. <code>mysqlhotcopy</code> 备份</h2><p><strong>备份：</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">mysqlhotcopy --flushlog <span class="hljs-attribute">-u</span>=<span class="hljs-string">&#x27;用户&#x27;</span> <span class="hljs-attribute">-p</span>=<span class="hljs-string">&#x27;密码&#x27;</span> <span class="hljs-attribute">--regexp</span>=正则  备份目录<br></code></pre></td></tr></table></figure>

<p><strong>还原：</strong></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cp -a 备份目录  数据目录（<span class="hljs-regexp">/var/</span>lib/mysql）<br></code></pre></td></tr></table></figure>

<h2 id="3-mysqldump-和-mysqlhotcopy-示例："><a href="#3-mysqldump-和-mysqlhotcopy-示例：" class="headerlink" title="3. mysqldump 和 mysqlhotcopy 示例："></a>3. <code>mysqldump</code> 和 <code>mysqlhotcopy</code> 示例：</h2><p><strong><code>mysql</code> 备份和还原</strong></p>
<p>把数据库 <code>web</code> 备份到 <code>/mysqldata</code> 目录下</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@test</span> ~]<span class="hljs-meta"># mysqldump -uroot -p web &gt; /mysqldata/web.sql</span><br></code></pre></td></tr></table></figure>

<p>把数据库 <code>web.sql</code> 导入到 <code>test2</code> 下：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@test2 ~]# mysql -uroot -p # mysql-server<br>mysql&gt; create database web<br>[root@test2 ~]# mysql web &lt; web.sql<br>mysql&gt; show tables;<br><span class="hljs-code">+---------------+</span><br>| Tables_in_web |<br><span class="hljs-code">+---------------+</span><br>| a1            |<br><span class="hljs-code">+---------------+</span><br>1 row in set (0.00 sec)<br><br>mysql&gt; describe a1;<br><span class="hljs-code">+----------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| Field    | Type             | Null | Key | Default | Extra          |<br><span class="hljs-code">+----------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| sex      | char(1)          | YES  |     | NULL    |                |<br>| username | char(50)         | NO   |     |         |                |<br>| age      | int(11)          | NO   |     | 0       |                |<br>| time     | datetime         | YES  |     | NULL    |                |<br><span class="hljs-code">+----------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>5 rows in set (0.01 sec)<br></code></pre></td></tr></table></figure>

<p><strong>备份多个数据库（<code>--databases</code>）：</strong></p>
<blockquote>
<p>导入 备份多个文件的时候不需要创建数据库。</p>
</blockquote>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta"># 创建多个数据库</span><br>[root<span class="hljs-symbol">@test</span> mysql]<span class="hljs-meta"># mysqldump -uroot -p --databases a1 web &gt; /mysqldata/abc.sql</span><br><span class="hljs-meta"># 将abc.sql文件拷贝到test2</span><br>[root<span class="hljs-symbol">@test</span> mysqldata]<span class="hljs-meta"># scp abc.sql root@10.4.7.104:/root/</span><br>root<span class="hljs-symbol">@10</span><span class="hljs-number">.4</span><span class="hljs-number">.7</span><span class="hljs-number">.104</span><span class="hljs-string">&#x27;s password: </span><br><span class="hljs-string">abc.sql</span><br></code></pre></td></tr></table></figure>

<p>将数据库 <code>abc.sql</code> 文件导入到 <code>test2</code> 中：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@test2 ~]# mysql -uroot -p  &lt; abc.sql<br>mysql&gt; use a1;<br>Database changed<br><br>mysql&gt; show tables;<br><span class="hljs-code">+--------------+</span><br>| Tables_in_a1 |<br><span class="hljs-code">+--------------+</span><br>| a1           |<br><span class="hljs-code">+--------------+</span><br>1 row in set (0.00 sec)<br>mysql&gt; describe a1;<br><span class="hljs-code">+-------+</span>----------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>-------+<br>| Field | Type     | Null | Key | Default | Extra |<br><span class="hljs-code">+-------+</span>----------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>-------+<br>| id    | int(11)  | YES  |     | NULL    |       |<br>| name  | char(30) | YES  |     | NULL    |       |<br><span class="hljs-code">+-------+</span>----------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>-------+<br>2 rows in set (0.00 sec)<br><br>mysql&gt; use web;<br>Database changed<br><br>mysql&gt; show tables;<br><span class="hljs-code">+---------------+</span><br>| Tables_in_web |<br><span class="hljs-code">+---------------+</span><br>| a1            |<br><span class="hljs-code">+---------------+</span><br>1 row in set (0.00 sec)<br><br>mysql&gt; describe a1;<br><span class="hljs-code">+----------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| Field    | Type             | Null | Key | Default | Extra          |<br><span class="hljs-code">+----------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>| id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>| sex      | char(1)          | YES  |     | NULL    |                |<br>| username | char(50)         | NO   |     |         |                |<br>| age      | int(11)          | NO   |     | 0       |                |<br>| time     | datetime         | YES  |     | NULL    |                |<br><span class="hljs-code">+----------+</span>------------------<span class="hljs-code">+------+</span>-----<span class="hljs-code">+---------+</span>----------------+<br>5 rows in set (0.00 sec)<br><br></code></pre></td></tr></table></figure>

<p><strong>备份有规律的数据库：</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">#连续创建三个a开头的数据库<br>mysql&gt; <span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> a1;<br>mysql&gt; <span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> a2;<br>mysql&gt; <span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> a3;<br>[root@test mysqldata]# mysqlhotcopy <span class="hljs-comment">--flushlog -u=root -p --regexp=^a</span><br></code></pre></td></tr></table></figure>

<p>还原：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@test2 ~]<span class="hljs-comment"># cp -a /mysqldata/* /var/lib/mysql </span><br><span class="hljs-comment">#复制产生的文件到数据库目录下</span><br>[root@test2 mysql]<span class="hljs-comment"># ls</span><br><span class="hljs-built_in">a1</span>  <span class="hljs-built_in">a2</span>  <span class="hljs-built_in">a3</span>  auto.cnf  ibdata1  ib_logfile0  ib_logfile1  mysql  mysql.sock  performance_schema  <br><span class="hljs-comment">#登录数据库查看即可</span><br></code></pre></td></tr></table></figure>

<p><strong><code>mysql-binlog</code> 日志备份：</strong></p>
<p><strong>二进制日志（<code>log-bin</code> 日志）：所有对数据库状态<font color=red>更改</font>的操作（<code>create</code>、<code>drop</code>、<code>update</code> 等）</strong>s</p>
<p>​    修改 <code>my.cnf</code> 配置文件开启 <code>binlog</code> 日志记录功能</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@test mysql]<span class="hljs-comment"># vi /etc/my.cnf</span><br>log_bin=mysql-<span class="hljs-keyword">bin </span>    <span class="hljs-comment">#启动二进制日志</span><br>[root@test mysql]<span class="hljs-comment"># systemctl restart mysqld</span><br>[root@test mysql]<span class="hljs-comment"># cd /var/lib/mysql</span><br>[root@test mysql]<span class="hljs-comment"># ls  # 多了二进制mysql-bin.000001文件</span><br><span class="hljs-built_in">a1</span>  <span class="hljs-built_in">a2</span>  <span class="hljs-built_in">a3</span>  auto.cnf  ibdata1  ib_logfile0  ib_logfile1  mysql  mysql-<span class="hljs-keyword">bin.000001 </span> mysql-<span class="hljs-keyword">bin.index </span> mysql.sock<br></code></pre></td></tr></table></figure>

<p><strong>按时间还原：</strong></p>
<ul>
<li><code>--start-datetime</code></li>
<li><code>--stop-datetime</code></li>
</ul>
<p><strong>格式：</strong></p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">mysqlbinlog</span>  <span class="hljs-built_in">--start-datetime</span> <span class="hljs-string">&#x27;YY-MM-DD HH:MM:SS&#x27;</span> <span class="hljs-built_in">--stop-datetime</span> <span class="hljs-string">&#x27;YY-MM-DD HH:MM:SS&#x27;</span> 二进制日志 | <span class="hljs-string">mysql</span> -<span class="hljs-string">uroot</span> -<span class="hljs-string">p</span><br></code></pre></td></tr></table></figure>

<p><strong>按文件大小还原：</strong></p>
<ul>
<li><code>--start-position</code></li>
<li><code>--stop-position</code></li>
</ul>
<hr>
<p><strong>示例：</strong></p>
<p>创建数据库文件。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">mysql&gt; create database abc;<br>mysql&gt; use abc;<br>Database changed<br>mysql&gt; create table xxx(id int,name varchar(100));<br>mysql&gt; insert into xxx values (1,<span class="hljs-emphasis">&#x27;aaa&#x27;</span>),(2,<span class="hljs-emphasis">&#x27;bbb&#x27;</span>);<br>mysql&gt; select * from xxx;<br><span class="hljs-code">+------+</span>------+<br>| id   | name |<br><span class="hljs-code">+------+</span>------+<br>|    1 | aaa  |<br>|    2 | bbb  |<br><span class="hljs-code">+------+</span>------+<br>2 rows in set (0.00 sec)<br></code></pre></td></tr></table></figure>

<p>查看 <code>binlog</code> 日志文件：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@test mysql]# mysqlbinlog mysql-bin<span class="hljs-number">.000001</span> <br><span class="hljs-comment">/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/</span>;<br><span class="hljs-comment">/*!40019 SET @@session.max_insert_delayed_threads=0*/</span>;<br><span class="hljs-comment">/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/</span>;<br><span class="hljs-keyword">DELIMITER</span> <span class="hljs-comment">/*!*/</span>;<br># at <span class="hljs-number">4</span>      ←数据的大小 下面就是数据的时间<br><span class="hljs-meta">#210403 21:56:38 server id 1  end_log_pos 120 CRC32 0xc557e245 	Start: binlog v 4, server v 5.6.51-log created 210403 21:56:38 at startup</span><br># <span class="hljs-built_in">Warning</span>: this binlog <span class="hljs-keyword">is</span> either <span class="hljs-keyword">in</span> use <span class="hljs-keyword">or</span> was <span class="hljs-keyword">not</span> closed properly.<br><span class="hljs-keyword">ROLLBACK</span><span class="hljs-comment">/*!*/</span>;<br>BINLOG <span class="hljs-string">&#x27;</span><br><span class="hljs-string">FnRoYA8BAAAAdAAAAHgAAAABAAQANS42LjUxLWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class="hljs-string">AAAAAAAAAAAAAAAAAAAWdGhgEzgNAAgAEgAEBAQEEgAAXAAEGggAAAAICAgCAAAACgoKGRkAAUXi</span><br><span class="hljs-string">V8U=</span><br><span class="hljs-string">&#x27;</span><span class="hljs-comment">/*!*/</span>;<br># at <span class="hljs-number">120</span><br><span class="hljs-meta">#210403 21:59:48 server id 1  end_log_pos 211 CRC32 0x8828006a 	Query	thread_id=2	exec_time=0	error_code=0</span><br><span class="hljs-keyword">SET</span> <span class="hljs-type">TIMESTAMP</span>=<span class="hljs-number">1617458388</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> @@<span class="hljs-keyword">session</span>.pseudo_thread_id=<span class="hljs-number">2</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> @@<span class="hljs-keyword">session</span>.foreign_key_checks=<span class="hljs-number">1</span>, @@<span class="hljs-keyword">session</span>.sql_auto_is_null=<span class="hljs-number">0</span>, @@<span class="hljs-keyword">session</span>.unique_checks=<span class="hljs-number">1</span>, @@<span class="hljs-keyword">session</span>.autocommit=<span class="hljs-number">1</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> @@<span class="hljs-keyword">session</span>.sql_mode=<span class="hljs-number">1075838976</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> @@<span class="hljs-keyword">session</span>.auto_increment_increment=<span class="hljs-number">1</span>, @@<span class="hljs-keyword">session</span>.auto_increment_offset=<span class="hljs-number">1</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-comment">/*!\C utf8 */</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> @@<span class="hljs-keyword">session</span>.character_set_client=<span class="hljs-number">33</span>,@@<span class="hljs-keyword">session</span>.collation_connection=<span class="hljs-number">33</span>,@@<span class="hljs-keyword">session</span>.collation_server=<span class="hljs-number">8</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> @@<span class="hljs-keyword">session</span>.lc_time_names=<span class="hljs-number">0</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> @@<span class="hljs-keyword">session</span>.collation_database=<span class="hljs-keyword">DEFAULT</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> abc<br><span class="hljs-comment">/*!*/</span>;<br># at <span class="hljs-number">211</span><br><span class="hljs-meta">#210403 22:00:31 server id 1  end_log_pos 325 CRC32 0x246bf748 	Query	thread_id=2	exec_time=0	error_code=0</span><br>use `abc`<span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">SET</span> <span class="hljs-type">TIMESTAMP</span>=<span class="hljs-number">1617458431</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> xxx(id <span class="hljs-type">int</span>,<span class="hljs-type">name</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>))<br><span class="hljs-comment">/*!*/</span>;<br># at <span class="hljs-number">325</span><br><span class="hljs-meta">#210403 22:02:10 server id 1  end_log_pos 402 CRC32 0x1539e8d6 	Query	thread_id=2	exec_time=0	error_code=0</span><br><span class="hljs-keyword">SET</span> <span class="hljs-type">TIMESTAMP</span>=<span class="hljs-number">1617458530</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">BEGIN</span><br><span class="hljs-comment">/*!*/</span>;<br># at <span class="hljs-number">402</span><br><span class="hljs-meta">#210403 22:02:10 server id 1  end_log_pos 516 CRC32 0x84c5a159 	Query	thread_id=2	exec_time=0	error_code=0</span><br><span class="hljs-keyword">SET</span> <span class="hljs-type">TIMESTAMP</span>=<span class="hljs-number">1617458530</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> xxx <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;aaa&#x27;</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;bbb&#x27;</span>)<br><span class="hljs-comment">/*!*/</span>;<br># at <span class="hljs-number">516</span><br><span class="hljs-meta">#210403 22:02:10 server id 1  end_log_pos 547 CRC32 0x484b8992 	Xid = 11</span><br><span class="hljs-keyword">COMMIT</span><span class="hljs-comment">/*!*/</span>;<br><span class="hljs-keyword">DELIMITER</span> ;<br># <span class="hljs-keyword">End</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">log</span> file<br><span class="hljs-keyword">ROLLBACK</span> <span class="hljs-comment">/* added by mysqlbinlog */</span>;<br><span class="hljs-comment">/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/</span>;<br><span class="hljs-comment">/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/</span>;<br></code></pre></td></tr></table></figure>

<p>还原：</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs autoit">StartTime：<span class="hljs-number">210403</span> <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">38</span><br>EndTime：<span class="hljs-number">210403</span> <span class="hljs-number">22</span>:<span class="hljs-number">02</span>:<span class="hljs-number">10</span><br><span class="hljs-meta"># 恢复数据库文件包含上面的时间就可以</span><br>[root<span class="hljs-symbol">@test</span> mysql]<span class="hljs-meta"># cd /var/lib/mysql</span><br>[root<span class="hljs-symbol">@test</span> mysql]<span class="hljs-meta"># mysqlbinlog --start-datetime=<span class="hljs-string">&quot;2021-04-03 21:57:00&quot;</span> --stop-datetime=<span class="hljs-string">&quot;2021-04-03 22:03:00&quot;</span> mysql-bin.000001 | mysql -uroot -p123456</span><br></code></pre></td></tr></table></figure>


            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/MySQL/">MySQL</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/MySQL/">MySQL</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/41a9b626/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Mysql-集群(壹)</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/2293715e/">
                        <span class="hidden-mobile">MySQL-数据库</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "Mwdu7VOQpQQD3cKW6SsRSt4f-gzGzoHsz",
          app_key: "XAg4RThXdR3JX0BNAF0axveE",
          placeholder: "说点什么",
          path: window.location.pathname,
          avatar: "mp",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: true,
          recordIP: false,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        豫ICP备2021006301号
      </a>
    </span>
    
  </div>


  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
